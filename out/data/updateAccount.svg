<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2011px" preserveAspectRatio="none" style="width:2650px;height:2011px;background:#FFFFFF;" version="1.1" viewBox="0 0 2650 2011" width="2650px" zoomAndPan="magnify"><defs><filter height="300%" id="ffa63jb57cv03" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="1994.2188" style="stroke:#000000;stroke-width:1.0;" width="2633.5" x="5" y="5"/><path d="M169,5 L169,15.6094 L159,25.6094 L5,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="17" x="8" y="20.5332">sd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="29" y="20.5332">Update User Account</text><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="1795.6484" style="stroke:#A80036;stroke-width:1.0;" width="10" x="193.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="388.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="388.5" y="966.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1138.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1138.5" y="1039.8672"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="381.5391" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1597.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="656.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1597.5" y="1289.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="151.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2273.5" y="1319.5156"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2367" y="648.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="270.1641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2367" y="1573.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2550" y="678.5156"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2550" y="1603.5156"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2550" y="1782.625"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="551.1328" style="stroke:#000000;stroke-width:2.0;" width="2480.5" x="134" y="355.3281"/><rect fill="#FFFFFF" height="472.0781" style="stroke:none;stroke-width:1.0;" width="2480.5" x="134" y="434.3828"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="338.1875" style="stroke:#000000;stroke-width:2.0;" width="2460.5" x="144" y="561.2734"/><rect fill="#FFFFFF" height="289.4844" style="stroke:none;stroke-width:1.0;" width="2460.5" x="144" y="609.9766"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="138.2422" style="stroke:#000000;stroke-width:2.0;" width="1790.5" x="154" y="754.2188"/><rect fill="#FFFFFF" height="89.5391" style="stroke:none;stroke-width:1.0;" width="1790.5" x="154" y="802.9219"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="832.6484" style="stroke:#000000;stroke-width:2.0;" width="2500.5" x="124" y="1141.5703"/><rect fill="#FFFFFF" height="753.5938" style="stroke:none;stroke-width:1.0;" width="2500.5" x="124" y="1220.625"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="480.9453" style="stroke:#000000;stroke-width:2.0;" width="2480.5" x="134" y="1486.2734"/><rect fill="#FFFFFF" height="432.2422" style="stroke:none;stroke-width:1.0;" width="2480.5" x="134" y="1534.9766"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="281" style="stroke:#000000;stroke-width:2.0;" width="2460.5" x="144" y="1679.2188"/><rect fill="#FFFFFF" height="232.2969" style="stroke:none;stroke-width:1.0;" width="2460.5" x="144" y="1727.9219"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="1537.5" x="154" y="1858.3281"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="1537.5" x="154" y="1907.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="117.2188" y2="1991.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="198" x2="198" y1="117.2188" y2="1991.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="393" x2="393" y1="117.2188" y2="1991.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1143" x2="1143" y1="117.2188" y2="1991.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1602.5" x2="1602.5" y1="117.2188" y2="1991.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2278.5" x2="2278.5" y1="117.2188" y2="1991.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2371.5" x2="2371.5" y1="117.2188" y2="1991.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2554.5" x2="2554.5" y1="117.2188" y2="1991.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="10" y="114.1426">User</text><ellipse cx="27.5" cy="42.6094" fill="#FEFECE" filter="url(#ffa63jb57cv03)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,50.6094 L27.5,77.6094 M14.5,58.6094 L40.5,58.6094 M27.5,77.6094 L14.5,92.6094 M27.5,77.6094 L40.5,92.6094 " fill="none" filter="url(#ffa63jb57cv03)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#ffa63jb57cv03)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="65" x="164" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="171" y="102.1426">Browser</text><rect fill="#FEFECE" filter="url(#ffa63jb57cv03)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="135" x="324" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="331" y="102.1426">:CommonRoleFilter</text><rect fill="#FEFECE" filter="url(#ffa63jb57cv03)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="59" x="1112" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="1119" y="102.1426">:Helper</text><rect fill="#FEFECE" filter="url(#ffa63jb57cv03)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="154" x="1523.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1530.5" y="102.1426">:UpdateUserController</text><rect fill="#FEFECE" filter="url(#ffa63jb57cv03)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="82" x="2235.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="2242.5" y="102.1426">:GetParam</text><rect fill="#FEFECE" filter="url(#ffa63jb57cv03)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="77" x="2331.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="2338.5" y="102.1426">:UserDAO</text><rect fill="#FEFECE" filter="url(#ffa63jb57cv03)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="75" x="2515.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="2522.5" y="102.1426">Database</text><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="1795.6484" style="stroke:#A80036;stroke-width:1.0;" width="10" x="193.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="388.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="388.5" y="966.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1138.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1138.5" y="1039.8672"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="381.5391" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1597.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="656.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1597.5" y="1289.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="151.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2273.5" y="1319.5156"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2367" y="648.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="270.1641" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2367" y="1573.1641"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2550" y="678.5156"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2550" y="1603.5156"/><rect fill="#FFFFFF" filter="url(#ffa63jb57cv03)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2550" y="1782.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="181.5" y1="149.5703" y2="145.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="181.5" y1="149.5703" y2="153.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="192.5" y1="149.5703" y2="149.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="34.5" y="144.7139">Click on update user Link</text><line style="stroke:#A80036;stroke-width:1.0;" x1="386.5" x2="376.5" y1="179.9219" y2="175.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386.5" x2="376.5" y1="179.9219" y2="183.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="387.5" y1="179.9219" y2="179.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="210.5" y="175.0654">GET /UpdateUserController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="440.5" y1="210.2734" y2="210.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="440.5" x2="440.5" y1="210.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="399.5" x2="440.5" y1="223.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="399.5" x2="409.5" y1="223.2734" y2="219.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="399.5" x2="409.5" y1="223.2734" y2="227.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="405.5" y="205.417">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="1126.5" y1="253.625" y2="249.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="1126.5" y1="253.625" y2="257.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="1137.5" y1="253.625" y2="253.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="405.5" y="248.7686">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1148.5" x2="1190.5" y1="283.9766" y2="283.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1190.5" x2="1190.5" y1="283.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1190.5" y1="296.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="296.9766" y2="292.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="296.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1155.5" y="279.1201">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1148.5" x2="1190.5" y1="327.3281" y2="327.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1190.5" x2="1190.5" y1="327.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1190.5" y1="340.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="340.3281" y2="336.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="340.3281" y2="344.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1155.5" y="322.4717">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><path d="M134,355.3281 L195,355.3281 L195,363.3281 L185,373.3281 L134,373.3281 L134,355.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="551.1328" style="stroke:#000000;stroke-width:2.0;" width="2480.5" x="134" y="355.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="149" y="369.8232">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="73" x="210" y="368.7471">[return false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="396.0313" y2="392.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="396.0313" y2="400.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="398.5" x2="1137.5" y1="396.0313" y2="396.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="415.5" y="391.1748">forward login.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="426.3828" y2="422.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="426.3828" y2="430.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="387.5" y1="426.3828" y2="426.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="220.5" y="421.5264">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="134" x2="2614.5" y1="435.3828" y2="435.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="139" y="446.8018">[return true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="472.5703" y2="468.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="472.5703" y2="476.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="398.5" x2="1142.5" y1="472.5703" y2="472.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="415.5" y="467.7139">return true</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1595.5" x2="1585.5" y1="502.9219" y2="498.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1595.5" x2="1585.5" y1="502.9219" y2="506.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="393.5" x2="1596.5" y1="502.9219" y2="502.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="400.5" y="498.0654">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1649.5" y1="533.2734" y2="533.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1649.5" x2="1649.5" y1="533.2734" y2="546.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1649.5" y1="546.2734" y2="546.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1618.5" y1="546.2734" y2="542.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1618.5" y1="546.2734" y2="550.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="1614.5" y="528.417">HttpSession.getAttribute(String name): Object</text><path d="M144,561.2734 L205,561.2734 L205,569.2734 L195,579.2734 L144,579.2734 L144,561.2734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="338.1875" style="stroke:#000000;stroke-width:2.0;" width="2460.5" x="144" y="561.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="159" y="575.7686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="88" x="220" y="574.6924">[null username]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="601.9766" y2="597.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="601.9766" y2="605.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="1596.5" y1="601.9766" y2="601.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="220.5" y="597.1201">forward error.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="144" x2="2604.5" y1="610.9766" y2="610.9766"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86" x="149" y="622.3955">[get username]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2365" x2="2355" y1="648.1641" y2="644.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2365" x2="2355" y1="648.1641" y2="652.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="2366" y1="648.1641" y2="648.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="1614.5" y="643.3076">getOneUserByUsername(String username): User</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2548" x2="2538" y1="678.5156" y2="674.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2548" x2="2538" y1="678.5156" y2="682.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2549" y1="678.5156" y2="678.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="2384" y="673.6592">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2387" y1="708.8672" y2="704.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2387" y1="708.8672" y2="712.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2377" x2="2554" y1="708.8672" y2="708.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="2394" y="704.0107">return ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="739.2188" y2="735.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="739.2188" y2="743.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1607.5" x2="2371" y1="739.2188" y2="739.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="1624.5" y="734.3623">return User</text><path d="M154,754.2188 L215,754.2188 L215,762.2188 L205,772.2188 L154,772.2188 L154,754.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="138.2422" style="stroke:#000000;stroke-width:2.0;" width="1790.5" x="154" y="754.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="169" y="768.7139">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="230" y="767.6377">[not exist username]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="794.9219" y2="790.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="794.9219" y2="798.9219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="1596.5" y1="794.9219" y2="794.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="220.5" y="790.0654">forward error.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="154" x2="1944.5" y1="803.9219" y2="803.9219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95" x="159" y="815.3408">[exist username]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1649.5" y1="841.1094" y2="841.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1649.5" x2="1649.5" y1="841.1094" y2="854.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1649.5" y1="854.1094" y2="854.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1618.5" y1="854.1094" y2="850.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1618.5" y1="854.1094" y2="858.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="1614.5" y="836.2529">HttpSession.setAttribute(String arg0, Object arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="884.4609" y2="880.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="884.4609" y2="888.4609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="1601.5" y1="884.4609" y2="884.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="220.5" y="879.6045">forward updateUserInfo.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="181.5" y1="935.8125" y2="931.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="191.5" x2="181.5" y1="935.8125" y2="939.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="192.5" y1="935.8125" y2="935.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="34.5" y="930.9561">Submit Update Form</text><line style="stroke:#A80036;stroke-width:1.0;" x1="386.5" x2="376.5" y1="966.1641" y2="962.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="386.5" x2="376.5" y1="966.1641" y2="970.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="387.5" y1="966.1641" y2="966.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="210.5" y="961.3076">POST /UpdateUserController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="440.5" y1="996.5156" y2="996.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="440.5" x2="440.5" y1="996.5156" y2="1009.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="399.5" x2="440.5" y1="1009.5156" y2="1009.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="399.5" x2="409.5" y1="1009.5156" y2="1005.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="399.5" x2="409.5" y1="1009.5156" y2="1013.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="405.5" y="991.6592">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="1126.5" y1="1039.8672" y2="1035.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1136.5" x2="1126.5" y1="1039.8672" y2="1043.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="1137.5" y1="1039.8672" y2="1039.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="405.5" y="1035.0107">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1148.5" x2="1190.5" y1="1070.2188" y2="1070.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1190.5" x2="1190.5" y1="1070.2188" y2="1083.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1190.5" y1="1083.2188" y2="1083.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="1083.2188" y2="1079.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="1083.2188" y2="1087.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1155.5" y="1065.3623">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1148.5" x2="1190.5" y1="1113.5703" y2="1113.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1190.5" x2="1190.5" y1="1113.5703" y2="1126.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1190.5" y1="1126.5703" y2="1126.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="1126.5703" y2="1122.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1149.5" x2="1159.5" y1="1126.5703" y2="1130.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1155.5" y="1108.7139">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><path d="M124,1141.5703 L185,1141.5703 L185,1149.5703 L175,1159.5703 L124,1159.5703 L124,1141.5703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="832.6484" style="stroke:#000000;stroke-width:2.0;" width="2500.5" x="124" y="1141.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="139" y="1156.0654">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="73" x="200" y="1154.9893">[return false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="1182.2734" y2="1178.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="1182.2734" y2="1186.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="398.5" x2="1137.5" y1="1182.2734" y2="1182.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="415.5" y="1177.417">forward login.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1212.625" y2="1208.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1212.625" y2="1216.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="387.5" y1="1212.625" y2="1212.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="220.5" y="1207.7686">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="124" x2="2624.5" y1="1221.625" y2="1221.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="129" y="1233.0439">[return true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="1258.8125" y2="1254.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="398.5" x2="408.5" y1="1258.8125" y2="1262.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="398.5" x2="1142.5" y1="1258.8125" y2="1258.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="415.5" y="1253.9561">return true</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1595.5" x2="1585.5" y1="1289.1641" y2="1285.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1595.5" x2="1585.5" y1="1289.1641" y2="1293.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="393.5" x2="1596.5" y1="1289.1641" y2="1289.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="400.5" y="1284.3076">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2271.5" x2="2261.5" y1="1319.5156" y2="1315.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2271.5" x2="2261.5" y1="1319.5156" y2="1323.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="2272.5" y1="1319.5156" y2="1319.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="647" x="1614.5" y="1314.6592">getStringParam(HttpServletRequest request, String field, String label, int min, int max,String defaultValue):String</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1349.8672" y2="1345.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1349.8672" y2="1353.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1607.5" x2="2272.5" y1="1349.8672" y2="1349.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="1624.5" y="1345.0107">return fullName</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2271.5" x2="2261.5" y1="1380.2188" y2="1376.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2271.5" x2="2261.5" y1="1380.2188" y2="1384.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="2272.5" y1="1380.2188" y2="1380.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="446" x="1614.5" y="1375.3623">getEmailParams(HttpServletRequest request, String field, String label): String</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1410.5703" y2="1406.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1410.5703" y2="1414.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1607.5" x2="2272.5" y1="1410.5703" y2="1410.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="1624.5" y="1405.7139">return email</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2271.5" x2="2261.5" y1="1440.9219" y2="1436.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2271.5" x2="2261.5" y1="1440.9219" y2="1444.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="2272.5" y1="1440.9219" y2="1440.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="408" x="1614.5" y="1436.0654">getPhoneParams(HttpServletRequest request, String field, String label)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1471.2734" y2="1467.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1471.2734" y2="1475.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1607.5" x2="2277.5" y1="1471.2734" y2="1471.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="1624.5" y="1466.417">return phone</text><path d="M134,1486.2734 L195,1486.2734 L195,1494.2734 L185,1504.2734 L134,1504.2734 L134,1486.2734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="480.9453" style="stroke:#000000;stroke-width:2.0;" width="2480.5" x="134" y="1486.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="149" y="1500.7686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="210" y="1499.6924">[invalid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1526.9766" y2="1522.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1526.9766" y2="1530.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="1596.5" y1="1526.9766" y2="1526.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="220.5" y="1522.1201">forward updateUserInfo.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="134" x2="2614.5" y1="1535.9766" y2="1535.9766"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="59" x="139" y="1547.3955">[valid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2365" x2="2355" y1="1573.1641" y2="1569.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2365" x2="2355" y1="1573.1641" y2="1577.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="2366" y1="1573.1641" y2="1573.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="1614.5" y="1568.3076">getOneUserByUsername(String username): User</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2548" x2="2538" y1="1603.5156" y2="1599.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2548" x2="2538" y1="1603.5156" y2="1607.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2549" y1="1603.5156" y2="1603.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="2384" y="1598.6592">executeQuery()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2387" y1="1633.8672" y2="1629.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2387" y1="1633.8672" y2="1637.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2377" x2="2554" y1="1633.8672" y2="1633.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="2394" y="1629.0107">Return result set</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1664.2188" y2="1660.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1664.2188" y2="1668.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1607.5" x2="2366" y1="1664.2188" y2="1664.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="1624.5" y="1659.3623">User</text><path d="M144,1679.2188 L205,1679.2188 L205,1687.2188 L195,1697.2188 L144,1697.2188 L144,1679.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="281" style="stroke:#000000;stroke-width:2.0;" width="2460.5" x="144" y="1679.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="159" y="1693.7139">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="220" y="1692.6377">[Not found user]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1719.9219" y2="1715.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1719.9219" y2="1723.9219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="1596.5" y1="1719.9219" y2="1719.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="220.5" y="1715.0654">forward updateUserInfo.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="144" x2="2604.5" y1="1728.9219" y2="1728.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2365" x2="2355" y1="1752.2734" y2="1748.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2365" x2="2355" y1="1752.2734" y2="1756.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="2366" y1="1752.2734" y2="1752.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="571" x="1614.5" y="1747.417">updateUserInfoByUsername(String username, String fullName, String email, String phone): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2548" x2="2538" y1="1782.625" y2="1778.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2548" x2="2538" y1="1782.625" y2="1786.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2549" y1="1782.625" y2="1782.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="2384" y="1777.7686">executeUpdate()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2387" y1="1812.9766" y2="1808.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2377" x2="2387" y1="1812.9766" y2="1816.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2377" x2="2554" y1="1812.9766" y2="1812.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="2394" y="1808.1201">Return int</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1843.3281" y2="1839.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1607.5" x2="1617.5" y1="1843.3281" y2="1847.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1607.5" x2="2371" y1="1843.3281" y2="1843.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="1624.5" y="1838.4717">return boolean</text><path d="M154,1858.3281 L215,1858.3281 L215,1866.3281 L205,1876.3281 L154,1876.3281 L154,1858.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="1537.5" x="154" y="1858.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="169" y="1872.8232">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79" x="230" y="1871.7471">[update=false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1899.0313" y2="1895.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="203.5" x2="213.5" y1="1899.0313" y2="1903.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="203.5" x2="1596.5" y1="1899.0313" y2="1899.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="220.5" y="1894.1748">forward updateUserInfo.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="154" x2="1691.5" y1="1908.0313" y2="1908.0313"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75" x="159" y="1919.4502">[update=true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="198.5" x2="208.5" y1="1945.2188" y2="1941.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="198.5" x2="208.5" y1="1945.2188" y2="1949.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="198.5" x2="1601.5" y1="1945.2188" y2="1945.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="215.5" y="1940.3623">Redirect /ViewUserController</text><!--MD5=[e9a2cf078539430f043d4d3ff5025a2f]
@startuml updateAccount

hide footbox
mainframe <b>sd</b> Update User Account
actor User
participant "Browser" as Browser
participant ":CommonRoleFilter" as CommonRoleFilter
participant ":Helper" as Helper
participant ":UpdateUserController" as UpdateUserController
participant ":GetParam" as GetParam
participant ":UserDAO" as UserDao
participant "Database" as DB

User ->> Browser: Click on update user Link
activate Browser
Browser ->> CommonRoleFilter: GET /UpdateUserController
activate CommonRoleFilter
CommonRoleFilter ->> CommonRoleFilter: Context.lookup(String name): Object
CommonRoleFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
alt return false 
    Helper - ->> CommonRoleFilter: forward login.jsp
    CommonRoleFilter - ->> Browser: forward login.jsp
else return true
    Helper - ->> CommonRoleFilter: return true
    deactivate Helper
    CommonRoleFilter ->> UpdateUserController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    deactivate CommonRoleFilter
    activate UpdateUserController
    UpdateUserController ->> UpdateUserController: HttpSession.getAttribute(String name): Object
    alt null username
        UpdateUserController - ->> Browser: forward error.jsp
    else get username
        UpdateUserController ->> UserDao: getOneUserByUsername(String username): User
        activate UserDao
        UserDao ->> DB: executeQuery(): ResultSet
        activate DB
        DB - ->> UserDao: return ResultSet
        deactivate DB
        UserDao - ->> UpdateUserController: return User
        deactivate UserDao
        alt not exist username
            UpdateUserController - ->> Browser: forward error.jsp
        else exist username
            UpdateUserController ->> UpdateUserController: HttpSession.setAttribute(String arg0, Object arg1): void
            UpdateUserController - ->> Browser: forward updateUserInfo.jsp
        deactivate UpdateUserController
    end
    end
end


User ->> Browser: Submit Update Form
Browser ->> CommonRoleFilter: POST /UpdateUserController
activate CommonRoleFilter
CommonRoleFilter ->> CommonRoleFilter: Context.lookup(String name): Object
CommonRoleFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
alt return false 
    Helper - ->> CommonRoleFilter: forward login.jsp
    CommonRoleFilter - ->> Browser: forward login.jsp
else return true
    Helper - ->> CommonRoleFilter: return true
    deactivate Helper
    CommonRoleFilter ->> UpdateUserController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    deactivate CommonRoleFilter
    activate UpdateUserController
    UpdateUserController ->> GetParam: getStringParam(HttpServletRequest request, String field, String label, int min, int max,String defaultValue):String
    activate GetParam
    GetParam - - ->> UpdateUserController: return fullName
    UpdateUserController ->> GetParam: getEmailParams(HttpServletRequest request, String field, String label): String
    GetParam - - ->> UpdateUserController: return email
    UpdateUserController ->> GetParam: getPhoneParams(HttpServletRequest request, String field, String label)
    GetParam - - ->> UpdateUserController: return phone
    deactivate GetParam
    alt invalid data
        UpdateUserController - ->> Browser: forward updateUserInfo.jsp
    else valid data
        UpdateUserController ->> UserDao: getOneUserByUsername(String username): User
        activate UserDao
        UserDao ->> DB: executeQuery()
        activate DB
        DB - ->> UserDao: Return result set
        deactivate DB
        UserDao - ->> UpdateUserController: User
        alt Not found user
            UpdateUserController - ->> Browser: forward updateUserInfo.jsp
        else
            UpdateUserController ->> UserDao: updateUserInfoByUsername(String username, String fullName, String email, String phone): boolean
            UserDao ->> DB: executeUpdate()
            activate DB
            DB - ->> UserDao: Return int
            deactivate DB
            UserDao - ->> UpdateUserController: return boolean
            deactivate UserDao
            alt update=false
                UpdateUserController - ->> Browser: forward updateUserInfo.jsp
            else  update=true
                UpdateUserController - ->> Browser: Redirect /ViewUserController 
                deactivate UpdateUserController
                deactivate Browser
            end
        end
    end
end
@enduml

PlantUML version 1.2021.7(Sun May 23 19:40:07 ICT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>