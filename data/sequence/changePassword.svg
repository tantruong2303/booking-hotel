<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1902px" preserveAspectRatio="none" style="width:2135px;height:1902px;background:#FFFFFF;" version="1.1" viewBox="0 0 2135 1902" width="2135px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nal9fjg25d53" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="1885.3281" style="stroke:#000000;stroke-width:1.0;" width="2118.5" x="5" y="5"/><path d="M210,5 L210,15.6094 L200,25.6094 L5,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="17" x="8" y="20.5332">sd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="29" y="20.5332">Change Password For User</text><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="1679.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="231.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="459.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="1228.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="459.5" y="600.9766"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="819.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="905.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="819.5" y="923.9766"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1342.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1342.5" y="674.6797"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1342.5" y="1369.7344"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1801.5" y="954.3281"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="506.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1895" y="1160.2734"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2025" y="1190.625"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2025" y="1606.0313"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="185.9453" style="stroke:#000000;stroke-width:2.0;" width="1197" x="192" y="355.3281"/><rect fill="#FFFFFF" height="106.8906" style="stroke:none;stroke-width:1.0;" width="1197" x="192" y="434.3828"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="1088.9453" style="stroke:#000000;stroke-width:2.0;" width="1957.5" x="152" y="776.3828"/><rect fill="#FFFFFF" height="1009.8906" style="stroke:none;stroke-width:1.0;" width="1957.5" x="152" y="855.4375"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="815.2969" style="stroke:#000000;stroke-width:2.0;" width="1937.5" x="162" y="1043.0313"/><rect fill="#FFFFFF" height="736.2422" style="stroke:none;stroke-width:1.0;" width="1937.5" x="162" y="1122.0859"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="585" style="stroke:#000000;stroke-width:2.0;" width="1917.5" x="172" y="1266.3281"/><rect fill="#FFFFFF" height="505.9453" style="stroke:none;stroke-width:1.0;" width="1917.5" x="172" y="1345.3828"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="385.8906" style="stroke:#000000;stroke-width:2.0;" width="1897.5" x="182" y="1458.4375"/><rect fill="#FFFFFF" height="306.8359" style="stroke:none;stroke-width:1.0;" width="1897.5" x="182" y="1537.4922"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="155.5938" style="stroke:#000000;stroke-width:2.0;" width="740" x="192" y="1681.7344"/><rect fill="#FFFFFF" height="76.5391" style="stroke:none;stroke-width:1.0;" width="740" x="192" y="1760.7891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="117.2188" y2="1882.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="236" x2="236" y1="117.2188" y2="1882.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="464" x2="464" y1="117.2188" y2="1882.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="824" x2="824" y1="117.2188" y2="1882.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1347" x2="1347" y1="117.2188" y2="1882.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1806.5" x2="1806.5" y1="117.2188" y2="1882.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1899.5" x2="1899.5" y1="117.2188" y2="1882.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2029.5" x2="2029.5" y1="117.2188" y2="1882.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="10" y="114.1426">User</text><ellipse cx="27.5" cy="42.6094" fill="#FEFECE" filter="url(#f1nal9fjg25d53)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,50.6094 L27.5,77.6094 M14.5,58.6094 L40.5,58.6094 M27.5,77.6094 L14.5,92.6094 M27.5,77.6094 L40.5,92.6094 " fill="none" filter="url(#f1nal9fjg25d53)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1nal9fjg25d53)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="65" x="202" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="209" y="102.1426">Browser</text><rect fill="#FEFECE" filter="url(#f1nal9fjg25d53)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="135" x="395" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="402" y="102.1426">:CommonRoleFilter</text><rect fill="#FEFECE" filter="url(#f1nal9fjg25d53)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="191" x="727" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="734" y="102.1426">:ChangePasswordController</text><rect fill="#FEFECE" filter="url(#f1nal9fjg25d53)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="59" x="1316" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="1323" y="102.1426">:Helper</text><rect fill="#FEFECE" filter="url(#f1nal9fjg25d53)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="82" x="1763.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="1770.5" y="102.1426">:GetParam</text><rect fill="#FEFECE" filter="url(#f1nal9fjg25d53)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="77" x="1859.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1866.5" y="102.1426">:UserDAO</text><rect fill="#FEFECE" filter="url(#f1nal9fjg25d53)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1990.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1997.5" y="102.1426">Database</text><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="1679.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="231.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="459.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="1228.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="459.5" y="600.9766"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="819.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="905.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="819.5" y="923.9766"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1342.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1342.5" y="674.6797"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1342.5" y="1369.7344"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1801.5" y="954.3281"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="506.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1895" y="1160.2734"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2025" y="1190.625"/><rect fill="#FFFFFF" filter="url(#f1nal9fjg25d53)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2025" y="1606.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="229.5" x2="219.5" y1="149.5703" y2="145.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="229.5" x2="219.5" y1="149.5703" y2="153.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="230.5" y1="149.5703" y2="149.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="34.5" y="144.7139">Click on change password link</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="447.5" y1="179.9219" y2="175.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="447.5" y1="179.9219" y2="183.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="458.5" y1="179.9219" y2="179.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="248.5" y="175.0654">GET /ChangePasswordController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="511.5" y1="210.2734" y2="210.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="511.5" x2="511.5" y1="210.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="470.5" x2="511.5" y1="223.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="470.5" x2="480.5" y1="223.2734" y2="219.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="470.5" x2="480.5" y1="223.2734" y2="227.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="476.5" y="205.417">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1340.5" x2="1330.5" y1="253.625" y2="249.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1340.5" x2="1330.5" y1="253.625" y2="257.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="1341.5" y1="253.625" y2="253.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="476.5" y="248.7686">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1394.5" y1="283.9766" y2="283.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1394.5" x2="1394.5" y1="283.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1394.5" y1="296.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="296.9766" y2="292.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="296.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1359.5" y="279.1201">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1394.5" y1="327.3281" y2="327.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1394.5" x2="1394.5" y1="327.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1394.5" y1="340.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="340.3281" y2="336.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="340.3281" y2="344.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1359.5" y="322.4717">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><path d="M192,355.3281 L253,355.3281 L253,363.3281 L243,373.3281 L192,373.3281 L192,355.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="185.9453" style="stroke:#000000;stroke-width:2.0;" width="1197" x="192" y="355.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="207" y="369.8232">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="73" x="268" y="368.7471">[return false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="396.0313" y2="392.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="396.0313" y2="400.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="1341.5" y1="396.0313" y2="396.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="486.5" y="391.1748">forward login.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="426.3828" y2="422.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="426.3828" y2="430.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="458.5" y1="426.3828" y2="426.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="258.5" y="421.5264">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="192" x2="1389" y1="435.3828" y2="435.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="197" y="446.8018">[return true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="472.5703" y2="468.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="472.5703" y2="476.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="1346.5" y1="472.5703" y2="472.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="486.5" y="467.7139">return true</text><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="807.5" y1="502.9219" y2="498.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="807.5" y1="502.9219" y2="506.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="464.5" x2="818.5" y1="502.9219" y2="502.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="471.5" y="498.0654">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="533.2734" y2="529.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="533.2734" y2="537.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="823.5" y1="533.2734" y2="533.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="258.5" y="528.417">forward changePassword.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="229.5" x2="219.5" y1="570.625" y2="566.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="229.5" x2="219.5" y1="570.625" y2="574.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="230.5" y1="570.625" y2="570.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="34.5" y="565.7686">Submit ChangePassword Form</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="447.5" y1="600.9766" y2="596.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="447.5" y1="600.9766" y2="604.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="458.5" y1="600.9766" y2="600.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="248.5" y="596.1201">POST /ChangePasswordController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="511.5" y1="631.3281" y2="631.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="511.5" x2="511.5" y1="631.3281" y2="644.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="470.5" x2="511.5" y1="644.3281" y2="644.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="470.5" x2="480.5" y1="644.3281" y2="640.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="470.5" x2="480.5" y1="644.3281" y2="648.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="476.5" y="626.4717">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1340.5" x2="1330.5" y1="674.6797" y2="670.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1340.5" x2="1330.5" y1="674.6797" y2="678.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="1341.5" y1="674.6797" y2="674.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="476.5" y="669.8232">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1394.5" y1="705.0313" y2="705.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1394.5" x2="1394.5" y1="705.0313" y2="718.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1394.5" y1="718.0313" y2="718.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="718.0313" y2="714.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="718.0313" y2="722.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1359.5" y="700.1748">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1352.5" x2="1394.5" y1="748.3828" y2="748.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1394.5" x2="1394.5" y1="748.3828" y2="761.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1394.5" y1="761.3828" y2="761.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="761.3828" y2="757.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1353.5" x2="1363.5" y1="761.3828" y2="765.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1359.5" y="743.5264">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><path d="M152,776.3828 L213,776.3828 L213,784.3828 L203,794.3828 L152,794.3828 L152,776.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1088.9453" style="stroke:#000000;stroke-width:2.0;" width="1957.5" x="152" y="776.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="167" y="790.8779">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="73" x="228" y="789.8018">[return false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="817.0859" y2="813.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="817.0859" y2="821.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="1341.5" y1="817.0859" y2="817.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="486.5" y="812.2295">forward login.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="847.4375" y2="843.4375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="847.4375" y2="851.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="458.5" y1="847.4375" y2="847.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="258.5" y="842.5811">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="152" x2="2109.5" y1="856.4375" y2="856.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="157" y="867.8564">[return true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="893.625" y2="889.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="893.625" y2="897.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="1346.5" y1="893.625" y2="893.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="486.5" y="888.7686">return true</text><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="807.5" y1="923.9766" y2="919.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="807.5" y1="923.9766" y2="927.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="818.5" y1="923.9766" y2="923.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="476.5" y="919.1201">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1799.5" x2="1789.5" y1="954.3281" y2="950.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1799.5" x2="1789.5" y1="954.3281" y2="958.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="1800.5" y1="954.3281" y2="954.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="647" x="836.5" y="949.4717">getStringParam(HttpServletRequest request, String field, String label, int min, int max,String defaultValue):String</text><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="984.6797" y2="980.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="984.6797" y2="988.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="829.5" x2="1805.5" y1="984.6797" y2="984.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="846.5" y="979.8232">return newPassword, confirmPassword, oldPassword</text><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="871.5" y1="1015.0313" y2="1015.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="871.5" x2="871.5" y1="1015.0313" y2="1028.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="830.5" x2="871.5" y1="1028.0313" y2="1028.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="830.5" x2="840.5" y1="1028.0313" y2="1024.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="830.5" x2="840.5" y1="1028.0313" y2="1032.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="836.5" y="1010.1748">HttpSession.getAttribute(String arg0, Object arg1): void</text><path d="M162,1043.0313 L223,1043.0313 L223,1051.0313 L213,1061.0313 L162,1061.0313 L162,1043.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="815.2969" style="stroke:#000000;stroke-width:2.0;" width="1937.5" x="162" y="1043.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="177" y="1057.5264">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="238" y="1056.4502">[invalid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1083.7344" y2="1079.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1083.7344" y2="1087.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="818.5" y1="1083.7344" y2="1083.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="486.5" y="1078.8779">forward changePassword.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1114.0859" y2="1110.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1114.0859" y2="1118.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="458.5" y1="1114.0859" y2="1114.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="258.5" y="1109.2295">forward changePassword.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="162" x2="2099.5" y1="1123.0859" y2="1123.0859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="59" x="167" y="1134.5049">[valid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1893" x2="1883" y1="1160.2734" y2="1156.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1893" x2="1883" y1="1160.2734" y2="1164.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="1894" y1="1160.2734" y2="1160.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="836.5" y="1155.417">getOneUserByUsername(String username): User</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2023" x2="2013" y1="1190.625" y2="1186.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2023" x2="2013" y1="1190.625" y2="1194.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1905" x2="2024" y1="1190.625" y2="1190.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="1912" y="1185.7686">executeQuery()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1905" x2="1915" y1="1220.9766" y2="1216.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1905" x2="1915" y1="1220.9766" y2="1224.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1905" x2="2029" y1="1220.9766" y2="1220.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1922" y="1216.1201">Return result set</text><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="1251.3281" y2="1247.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="1251.3281" y2="1255.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="829.5" x2="1894" y1="1251.3281" y2="1251.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="846.5" y="1246.4717">User</text><path d="M172,1266.3281 L233,1266.3281 L233,1274.3281 L223,1284.3281 L172,1284.3281 L172,1266.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="585" style="stroke:#000000;stroke-width:2.0;" width="1917.5" x="172" y="1266.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="187" y="1280.8232">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90" x="248" y="1279.7471">[Not found user]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1307.0313" y2="1303.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1307.0313" y2="1311.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="818.5" y1="1307.0313" y2="1307.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="486.5" y="1302.1748">forward changePassword.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1337.3828" y2="1333.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1337.3828" y2="1341.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="458.5" y1="1337.3828" y2="1337.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="258.5" y="1332.5264">forward changePassword.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="172" x2="2089.5" y1="1346.3828" y2="1346.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1340.5" x2="1330.5" y1="1369.7344" y2="1365.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1340.5" x2="1330.5" y1="1369.7344" y2="1373.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="1341.5" y1="1369.7344" y2="1369.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="494" x="836.5" y="1364.8779">comparePassword(String inputPassword, String databasePassword, int key): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="1400.0859" y2="1396.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="1400.0859" y2="1404.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="829.5" x2="1346.5" y1="1400.0859" y2="1400.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="846.5" y="1395.2295">return boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="871.5" y1="1430.4375" y2="1430.4375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="871.5" x2="871.5" y1="1430.4375" y2="1443.4375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="830.5" x2="871.5" y1="1443.4375" y2="1443.4375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="830.5" x2="840.5" y1="1443.4375" y2="1439.4375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="830.5" x2="840.5" y1="1443.4375" y2="1447.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="836.5" y="1425.5811">equals(Object anObject): boolean</text><path d="M182,1458.4375 L243,1458.4375 L243,1466.4375 L233,1476.4375 L182,1476.4375 L182,1458.4375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="385.8906" style="stroke:#000000;stroke-width:2.0;" width="1897.5" x="182" y="1458.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="197" y="1472.9326">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="258" y="1471.8564">[not equal old password]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1499.1406" y2="1495.1406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1499.1406" y2="1503.1406"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="818.5" y1="1499.1406" y2="1499.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="486.5" y="1494.2842">forward changePassword.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1529.4922" y2="1525.4922"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1529.4922" y2="1533.4922"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="458.5" y1="1529.4922" y2="1529.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="258.5" y="1524.6357">forward changePassword.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="182" x2="2079.5" y1="1538.4922" y2="1538.4922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="187" y="1549.9111">[equal old password]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1893" x2="1883" y1="1575.6797" y2="1571.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1893" x2="1883" y1="1575.6797" y2="1579.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="1894" y1="1575.6797" y2="1575.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="455" x="836.5" y="1570.8232">updateUserPasswordByUsername(String username, String password): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2023" x2="2013" y1="1606.0313" y2="1602.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2023" x2="2013" y1="1606.0313" y2="1610.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1905" x2="2024" y1="1606.0313" y2="1606.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1912" y="1601.1748">executeUpdate()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1905" x2="1915" y1="1636.3828" y2="1632.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1905" x2="1915" y1="1636.3828" y2="1640.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1905" x2="2029" y1="1636.3828" y2="1636.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="1922" y="1631.5264">Return int</text><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="1666.7344" y2="1662.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="829.5" x2="839.5" y1="1666.7344" y2="1670.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="829.5" x2="1899" y1="1666.7344" y2="1666.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="846.5" y="1661.8779">return boolean</text><path d="M192,1681.7344 L253,1681.7344 L253,1689.7344 L243,1699.7344 L192,1699.7344 L192,1681.7344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:2.0;" width="740" x="192" y="1681.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="207" y="1696.2295">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79" x="268" y="1695.1533">[update=false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1722.4375" y2="1718.4375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1722.4375" y2="1726.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="818.5" y1="1722.4375" y2="1722.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="486.5" y="1717.5811">forward changePassword.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1752.7891" y2="1748.7891"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="251.5" y1="1752.7891" y2="1756.7891"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241.5" x2="458.5" y1="1752.7891" y2="1752.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="258.5" y="1747.9326">forward changePassword.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="192" x2="932" y1="1761.7891" y2="1761.7891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75" x="197" y="1773.208">[update=true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1798.9766" y2="1794.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="469.5" x2="479.5" y1="1798.9766" y2="1802.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="469.5" x2="818.5" y1="1798.9766" y2="1798.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="486.5" y="1794.1201">Redirect /ViewUserController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="236.5" x2="246.5" y1="1829.3281" y2="1825.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="236.5" x2="246.5" y1="1829.3281" y2="1833.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="236.5" x2="463.5" y1="1829.3281" y2="1829.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="253.5" y="1824.4717">Redirect /ViewUserController</text><!--MD5=[56a30571f6894d5f048c069acd9b3cee]
@startuml changePassword

hide footbox
mainframe <b>sd</b> Change Password For User
actor User
participant "Browser" as Browser
participant ":CommonRoleFilter" as CommonRoleFilter
participant ":ChangePasswordController" as ChangePasswordController
participant ":Helper" as Helper
participant ":GetParam" as GetParam
participant ":UserDAO" as UserDao
participant "Database" as DB

User ->> Browser: Click on change password link
activate Browser
Browser ->> CommonRoleFilter: GET /ChangePasswordController
activate CommonRoleFilter
CommonRoleFilter ->> CommonRoleFilter: Context.lookup(String name): Object
CommonRoleFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
alt return false 
    Helper - ->> CommonRoleFilter: forward login.jsp
    CommonRoleFilter - ->> Browser: forward login.jsp
else return true
    Helper - ->> CommonRoleFilter: return true
    deactivate Helper
    CommonRoleFilter ->> ChangePasswordController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    deactivate CommonRoleFilter
    activate ChangePasswordController
    ChangePasswordController - ->> Browser: forward changePassword.jsp
    deactivate ChangePasswordController
   
end


User ->> Browser: Submit ChangePassword Form
Browser ->> CommonRoleFilter: POST /ChangePasswordController
activate CommonRoleFilter
CommonRoleFilter ->> CommonRoleFilter: Context.lookup(String name): Object
CommonRoleFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
alt return false 
    Helper - ->> CommonRoleFilter: forward login.jsp
    CommonRoleFilter - ->> Browser: forward login.jsp
else return true
    Helper - ->> CommonRoleFilter: return true
    deactivate Helper
    CommonRoleFilter ->> ChangePasswordController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    activate ChangePasswordController
    ChangePasswordController ->> GetParam: getStringParam(HttpServletRequest request, String field, String label, int min, int max,String defaultValue):String
    activate GetParam
    GetParam - - ->> ChangePasswordController: return newPassword, confirmPassword, oldPassword 
    deactivate GetParam
    ChangePasswordController ->> ChangePasswordController: HttpSession.getAttribute(String arg0, Object arg1): void
    alt invalid data
        ChangePasswordController - ->> CommonRoleFilter: forward changePassword.jsp
        CommonRoleFilter - ->> Browser: forward changePassword.jsp
    else valid data
        ChangePasswordController ->> UserDao: getOneUserByUsername(String username): User
        activate UserDao
        UserDao ->> DB: executeQuery()
        activate DB
        DB - ->> UserDao: Return result set
        deactivate DB
        UserDao - ->> ChangePasswordController: User
        alt Not found user
            ChangePasswordController - ->> CommonRoleFilter: forward changePassword.jsp
            CommonRoleFilter - ->> Browser: forward changePassword.jsp
        else
            ChangePasswordController ->> Helper:  comparePassword(String inputPassword, String databasePassword, int key): boolean
            activate Helper
            Helper   - ->> ChangePasswordController:  return boolean
            deactivate Helper
            ChangePasswordController   ->> ChangePasswordController:   equals(Object anObject): boolean
            alt not equal old password
                ChangePasswordController - ->> CommonRoleFilter: forward changePassword.jsp
                CommonRoleFilter - ->> Browser: forward changePassword.jsp
            else equal old password
                ChangePasswordController ->> UserDao:  updateUserPasswordByUsername(String username, String password): boolean
                UserDao ->> DB: executeUpdate()
                activate DB
                DB - ->> UserDao: Return int
                deactivate DB
                UserDao - ->> ChangePasswordController: return boolean
                deactivate UserDao
                alt update=false
                    ChangePasswordController - ->> CommonRoleFilter: forward changePassword.jsp
                    CommonRoleFilter - ->> Browser: forward changePassword.jsp
                else  update=true
                    ChangePasswordController - ->> CommonRoleFilter: Redirect /ViewUserController 
                    CommonRoleFilter - ->> Browser: Redirect /ViewUserController 
                    deactivate CommonRoleFilter
                    deactivate ChangePasswordController
                    deactivate Browser
                end
            end
        end
    end
end
@enduml

PlantUML version 1.2021.7(Sun May 23 19:40:07 ICT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>