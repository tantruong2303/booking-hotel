<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1251px" preserveAspectRatio="none" style="width:2097px;height:1251px;background:#FFFFFF;" version="1.1" viewBox="0 0 2097 1251" width="2097px" zoomAndPan="magnify"><defs><filter height="300%" id="ffoc7b3sa0kgq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="1234.8125" style="stroke:#000000;stroke-width:1.0;" width="2080.5" x="5" y="5"/><path d="M172,5 L172,15.6094 L162,25.6094 L5,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="17" x="8" y="20.5332">sd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="29" y="20.5332">View Room Controller</text><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="1036.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="178.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="1005.8906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="682.8906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="718.5" y="472.5703"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1191.5" y="665.5156"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1294.5" y="888.8125"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1477.5" y="695.8672"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1477.5" y="919.1641"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="117.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1556.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2015.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="829.1328" style="stroke:#000000;stroke-width:2.0;" width="1962.5" x="109" y="385.6797"/><rect fill="#FFFFFF" height="780.4297" style="stroke:none;stroke-width:1.0;" width="1962.5" x="109" y="434.3828"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="659.5391" style="stroke:#000000;stroke-width:2.0;" width="1423" x="119" y="548.2734"/><rect fill="#FFFFFF" height="580.4844" style="stroke:none;stroke-width:1.0;" width="1423" x="119" y="627.3281"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="429.2422" style="stroke:#000000;stroke-width:2.0;" width="1403" x="129" y="771.5703"/><rect fill="#FFFFFF" height="350.1875" style="stroke:none;stroke-width:1.0;" width="1403" x="129" y="850.625"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="198.9453" style="stroke:#000000;stroke-width:2.0;" width="962.5" x="139" y="994.8672"/><rect fill="#FFFFFF" height="119.8906" style="stroke:none;stroke-width:1.0;" width="962.5" x="139" y="1073.9219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="183" x2="183" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="363.5" x2="363.5" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="723.5" x2="723.5" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1101" x2="1101" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1196" x2="1196" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1299" x2="1299" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1482" x2="1482" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1561" x2="1561" y1="117.2188" y2="1231.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2020.5" x2="2020.5" y1="117.2188" y2="1231.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="10" y="114.1426">User</text><ellipse cx="27.5" cy="42.6094" fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,50.6094 L27.5,77.6094 M14.5,58.6094 L40.5,58.6094 M27.5,77.6094 L14.5,92.6094 M27.5,77.6094 L40.5,92.6094 " fill="none" filter="url(#ffoc7b3sa0kgq)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="65" x="149" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="156" y="102.1426">Browser</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="102" x="310.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="317.5" y="102.1426">CommonFilter</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="146" x="648.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="655.5" y="102.1426">:ViewRoomController</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="77" x="1061" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1068" y="102.1426">:UserDAO</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1152" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1159" y="102.1426">:RoomDAO</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1251" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1258" y="102.1426">:ReviewDAO</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1443" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1450" y="102.1426">Database</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="1532" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1539" y="102.1426">Helper</text><rect fill="#FEFECE" filter="url(#ffoc7b3sa0kgq)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="78" x="1979.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1986.5" y="102.1426">GetParam</text><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="1036.2422" style="stroke:#A80036;stroke-width:1.0;" width="10" x="178.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="1005.8906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="682.8906" style="stroke:#A80036;stroke-width:1.0;" width="10" x="718.5" y="472.5703"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1191.5" y="665.5156"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1294.5" y="888.8125"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1477.5" y="695.8672"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1477.5" y="919.1641"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="117.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1556.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#ffoc7b3sa0kgq)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="2015.5" y="502.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176.5" x2="166.5" y1="149.5703" y2="145.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176.5" x2="166.5" y1="149.5703" y2="153.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="177.5" y1="149.5703" y2="149.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="34.5" y="144.7139">Click on view room link</text><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="346.5" y1="179.9219" y2="175.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="356.5" x2="346.5" y1="179.9219" y2="183.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="357.5" y1="179.9219" y2="179.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="195.5" y="175.0654">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="225.5" y="175.0654">/ViewRoomController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="410.5" y1="210.2734" y2="210.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="410.5" x2="410.5" y1="210.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="369.5" x2="410.5" y1="223.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="369.5" x2="379.5" y1="223.2734" y2="219.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="369.5" x2="379.5" y1="223.2734" y2="227.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="375.5" y="205.417">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1554.5" x2="1544.5" y1="253.625" y2="249.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1554.5" x2="1544.5" y1="253.625" y2="257.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="1555.5" y1="253.625" y2="253.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="375.5" y="248.7686">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1566.5" x2="1608.5" y1="283.9766" y2="283.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1608.5" y1="283.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1567.5" x2="1608.5" y1="296.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1567.5" x2="1577.5" y1="296.9766" y2="292.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1567.5" x2="1577.5" y1="296.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1573.5" y="279.1201">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1566.5" x2="1608.5" y1="327.3281" y2="327.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1608.5" x2="1608.5" y1="327.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1567.5" x2="1608.5" y1="340.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1567.5" x2="1577.5" y1="340.3281" y2="336.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1567.5" x2="1577.5" y1="340.3281" y2="344.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1573.5" y="322.4717">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="370.6797" y2="366.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="370.6797" y2="374.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368.5" x2="1560.5" y1="370.6797" y2="370.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="385.5" y="365.8232">Return result</text><path d="M109,385.6797 L170,385.6797 L170,393.6797 L160,403.6797 L109,403.6797 L109,385.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="829.1328" style="stroke:#000000;stroke-width:2.0;" width="1962.5" x="109" y="385.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="124" y="400.1748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125" x="185" y="399.0986">[action does not allow]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="426.3828" y2="422.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="426.3828" y2="430.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="188.5" x2="357.5" y1="426.3828" y2="426.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="205.5" y="421.5264">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="109" x2="2071.5" y1="435.3828" y2="435.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="114" y="446.8018">[action allows]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="716.5" x2="706.5" y1="472.5703" y2="468.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="716.5" x2="706.5" y1="472.5703" y2="476.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="717.5" y1="472.5703" y2="472.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="375.5" y="467.7139">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="2013.5" x2="2003.5" y1="502.9219" y2="498.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="2013.5" x2="2003.5" y1="502.9219" y2="506.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="2014.5" y1="502.9219" y2="502.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="652" x="735.5" y="498.0654">getIntParams(HttpServletRequest request, String field, String label, int min, int max, Integer defaultValue): Integer</text><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="738.5" y1="533.2734" y2="529.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="738.5" y1="533.2734" y2="537.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="728.5" x2="2019.5" y1="533.2734" y2="533.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="745.5" y="528.417">Return roomId</text><path d="M119,548.2734 L180,548.2734 L180,556.2734 L170,566.2734 L119,566.2734 L119,548.2734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="659.5391" style="stroke:#000000;stroke-width:2.0;" width="1423" x="119" y="548.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="134" y="562.7686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="195" y="561.6924">[invalid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="588.9766" y2="584.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="588.9766" y2="592.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368.5" x2="717.5" y1="588.9766" y2="588.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="385.5" y="584.1201">forward error.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="619.3281" y2="615.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="619.3281" y2="623.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="188.5" x2="357.5" y1="619.3281" y2="619.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="205.5" y="614.4717">forward error.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="119" x2="1542" y1="628.3281" y2="628.3281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="59" x="124" y="639.7471">[valid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1189.5" x2="1179.5" y1="665.5156" y2="661.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1189.5" x2="1179.5" y1="665.5156" y2="669.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="1190.5" y1="665.5156" y2="665.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="735.5" y="660.6592">getRoomById(int roomId): Room</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1475.5" x2="1465.5" y1="695.8672" y2="691.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1475.5" x2="1465.5" y1="695.8672" y2="699.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1201.5" x2="1476.5" y1="695.8672" y2="695.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1208.5" y="691.0107">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1201.5" x2="1211.5" y1="726.2188" y2="722.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1201.5" x2="1211.5" y1="726.2188" y2="730.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1201.5" x2="1481.5" y1="726.2188" y2="726.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1218.5" y="721.3623">Return ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="738.5" y1="756.5703" y2="752.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="738.5" y1="756.5703" y2="760.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="728.5" x2="1195.5" y1="756.5703" y2="756.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="745.5" y="751.7139">Return Room</text><path d="M129,771.5703 L190,771.5703 L190,779.5703 L180,789.5703 L129,789.5703 L129,771.5703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="429.2422" style="stroke:#000000;stroke-width:2.0;" width="1403" x="129" y="771.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="144" y="786.0654">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="28" x="205" y="784.9893">[null]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="812.2734" y2="808.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="812.2734" y2="816.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368.5" x2="717.5" y1="812.2734" y2="812.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="385.5" y="807.417">forward error.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="842.625" y2="838.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="842.625" y2="846.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="188.5" x2="357.5" y1="842.625" y2="842.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="205.5" y="837.7686">forward error.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="129" x2="1532" y1="851.625" y2="851.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="134" y="863.0439">[not null]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1292.5" x2="1282.5" y1="888.8125" y2="884.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1292.5" x2="1282.5" y1="888.8125" y2="892.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="1293.5" y1="888.8125" y2="888.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="735.5" y="883.9561">getReviewByRoomId(int roomId): ArrayList&lt;Review&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1475.5" x2="1465.5" y1="919.1641" y2="915.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1475.5" x2="1465.5" y1="919.1641" y2="923.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1304.5" x2="1476.5" y1="919.1641" y2="919.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1311.5" y="914.3076">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1304.5" x2="1314.5" y1="949.5156" y2="945.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1304.5" x2="1314.5" y1="949.5156" y2="953.5156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1304.5" x2="1481.5" y1="949.5156" y2="949.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1321.5" y="944.6592">Return ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="738.5" y1="979.8672" y2="975.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="738.5" y1="979.8672" y2="983.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="728.5" x2="1298.5" y1="979.8672" y2="979.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="745.5" y="975.0107">Return ArrayList&lt;Review&gt;</text><path d="M139,994.8672 L200,994.8672 L200,1002.8672 L190,1012.8672 L139,1012.8672 L139,994.8672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="198.9453" style="stroke:#000000;stroke-width:2.0;" width="962.5" x="139" y="994.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="154" y="1009.3623">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="28" x="215" y="1008.2861">[null]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="1035.5703" y2="1031.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="1035.5703" y2="1039.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368.5" x2="717.5" y1="1035.5703" y2="1035.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="385.5" y="1030.7139">forward error.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="1065.9219" y2="1061.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="188.5" x2="198.5" y1="1065.9219" y2="1069.9219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="188.5" x2="357.5" y1="1065.9219" y2="1065.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="205.5" y="1061.0654">forward error.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="139" x2="1101.5" y1="1074.9219" y2="1074.9219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="49" x="144" y="1086.3408">[not null]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="728.5" x2="770.5" y1="1112.1094" y2="1112.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="770.5" x2="770.5" y1="1112.1094" y2="1125.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="729.5" x2="770.5" y1="1125.1094" y2="1125.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="729.5" x2="739.5" y1="1125.1094" y2="1121.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="729.5" x2="739.5" y1="1125.1094" y2="1129.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="354" x="735.5" y="1107.2529">HttpServletRequest.setArribute(String arg0, Object arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="1155.4609" y2="1151.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368.5" x2="378.5" y1="1155.4609" y2="1159.4609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="368.5" x2="722.5" y1="1155.4609" y2="1155.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="385.5" y="1150.6045">forward viewRoomInfo.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="183.5" x2="193.5" y1="1185.8125" y2="1181.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="183.5" x2="193.5" y1="1185.8125" y2="1189.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="183.5" x2="362.5" y1="1185.8125" y2="1185.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="200.5" y="1180.9561">forward viewRoomInfo.jsp</text><!--MD5=[12b0f61549d0c295799df044f185fa53]
@startuml
mainframe **sd** View Room Controller
hide footbox
actor User
participant "Browser" as Browser
participant "CommonFilter" as CommonFilter
participant ":ViewRoomController" as ViewRoomController
participant ":UserDAO" as UserDAO
participant ":RoomDAO" as RoomDAO
participant ":ReviewDAO" as ReviewDAO
participant "Database" as Database
participant "Helper" as Helper
participant "GetParam" as GetParam

User ->> Browser: Click on view room link
activate Browser
Browser ->> CommonFilter: **GET** /ViewRoomController
activate CommonFilter
CommonFilter ->> CommonFilter: Context.lookup(String name): Object
CommonFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
Helper - ->> CommonFilter: Return result
deactivate Helper

alt action does not allow
    CommonFilter - ->> Browser: forward login.jsp

else action allows
    CommonFilter ->> ViewRoomController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    activate ViewRoomController
    ViewRoomController ->> GetParam: getIntParams(HttpServletRequest request, String field, String label, int min, int max, Integer defaultValue): Integer
    activate GetParam
    GetParam - ->> ViewRoomController: Return roomId
    deactivate GetParam

    alt invalid data
        ViewRoomController - ->> CommonFilter: forward error.jsp
        CommonFilter - ->> Browser: forward error.jsp
    else valid data
        ViewRoomController ->> RoomDAO: getRoomById(int roomId): Room
        activate RoomDAO
        RoomDAO ->> Database: executeQuery(): ResultSet
        activate Database
        Database - ->> RoomDAO: Return ResultSet
        deactivate Database
        RoomDAO - ->> ViewRoomController: Return Room
        deactivate RoomDAO

        alt null
            ViewRoomController - ->> CommonFilter: forward error.jsp
            CommonFilter - ->> Browser: forward error.jsp
        else not null
            ViewRoomController ->> ReviewDAO: getReviewByRoomId(int roomId): ArrayList<Review>
            activate ReviewDAO
            ReviewDAO ->> Database: executeQuery(): ResultSet
            activate Database
            Database - ->> ReviewDAO: Return ResultSet
            deactivate Database
            ReviewDAO - ->> ViewRoomController: Return ArrayList<Review>
            deactivate ReviewDAO

            alt null
                ViewRoomController - ->> CommonFilter: forward error.jsp
                CommonFilter - ->> Browser: forward error.jsp
            else not null
                ViewRoomController ->> ViewRoomController: HttpServletRequest.setArribute(String arg0, Object arg1): void
                ViewRoomController - ->> CommonFilter: forward viewRoomInfo.jsp
                deactivate ViewRoomController
                CommonFilter - ->> Browser: forward viewRoomInfo.jsp
                deactivate CommonFilter
                deactivate Browser
            end

        end
    end
end
@enduml

PlantUML version 1.2021.7(Sun May 23 19:40:07 ICT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>