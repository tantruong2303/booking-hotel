<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1155px" preserveAspectRatio="none" style="width:2040px;height:1155px;background:#FFFFFF;" version="1.1" viewBox="0 0 2040 1155" width="2040px" zoomAndPan="magnify"><defs><filter height="300%" id="f1r6tc1bqo331d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="1138.4375" style="stroke:#000000;stroke-width:1.0;" width="2023" x="5" y="5"/><path d="M165,5 L165,15.6094 L155,25.6094 L5,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="17" x="8" y="20.5332">sd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="29" y="20.5332">Room List Controller</text><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="953.8672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="171.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="923.5156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="344.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="600.5156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="704.5" y="472.5703"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="117.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1094.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="151.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1553.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1649" y="786.9219"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1766.5" y="908.3281"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1949.5" y="817.2734"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1949.5" y="938.6797"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="732.7578" style="stroke:#000000;stroke-width:2.0;" width="1892" x="122" y="385.6797"/><rect fill="#FFFFFF" height="684.0547" style="stroke:none;stroke-width:1.0;" width="1892" x="122" y="434.3828"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="441.7578" style="stroke:#000000;stroke-width:2.0;" width="1872" x="132" y="669.6797"/><rect fill="#FFFFFF" height="362.7031" style="stroke:none;stroke-width:1.0;" width="1872" x="132" y="748.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="176" x2="176" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="349" x2="349" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="709" x2="709" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1099" x2="1099" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1558.5" x2="1558.5" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1653.5" x2="1653.5" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1771.5" x2="1771.5" y1="117.2188" y2="1135.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1954" x2="1954" y1="117.2188" y2="1135.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="10" y="114.1426">User</text><ellipse cx="27.5" cy="42.6094" fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,50.6094 L27.5,77.6094 M14.5,58.6094 L40.5,58.6094 M27.5,77.6094 L14.5,92.6094 M27.5,77.6094 L40.5,92.6094 " fill="none" filter="url(#f1r6tc1bqo331d)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="65" x="142" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="149" y="102.1426">Browser</text><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="107" x="294" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="301" y="102.1426">ManagerrFilter</text><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="139" x="638" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="645" y="102.1426">:RoomListController</text><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="1070" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1077" y="102.1426">Helper</text><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="78" x="1517.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1524.5" y="102.1426">GetParam</text><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1609.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1616.5" y="102.1426">:RoomDAO</text><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="122" x="1708.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1715.5" y="102.1426">:BookingInfoDAO</text><rect fill="#FEFECE" filter="url(#f1r6tc1bqo331d)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1915" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1922" y="102.1426">Database</text><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="953.8672" style="stroke:#A80036;stroke-width:1.0;" width="10" x="171.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="923.5156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="344.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="600.5156" style="stroke:#A80036;stroke-width:1.0;" width="10" x="704.5" y="472.5703"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="117.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1094.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="151.7578" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1553.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1649" y="786.9219"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1766.5" y="908.3281"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1949.5" y="817.2734"/><rect fill="#FFFFFF" filter="url(#f1r6tc1bqo331d)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1949.5" y="938.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="169.5" x2="159.5" y1="149.5703" y2="145.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="169.5" x2="159.5" y1="149.5703" y2="153.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="170.5" y1="149.5703" y2="149.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="34.5" y="144.7139">Clink on room list link</text><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="332.5" y1="179.9219" y2="175.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="342.5" x2="332.5" y1="179.9219" y2="183.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181.5" x2="343.5" y1="179.9219" y2="179.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="188.5" y="175.0654">GET</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="218.5" y="175.0654">/RoomListController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="396.5" y1="210.2734" y2="210.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="396.5" x2="396.5" y1="210.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="355.5" x2="396.5" y1="223.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="355.5" x2="365.5" y1="223.2734" y2="219.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="355.5" x2="365.5" y1="223.2734" y2="227.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="361.5" y="205.417">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1092.5" x2="1082.5" y1="253.625" y2="249.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1092.5" x2="1082.5" y1="253.625" y2="257.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="1093.5" y1="253.625" y2="253.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="361.5" y="248.7686">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1104.5" x2="1146.5" y1="283.9766" y2="283.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1146.5" x2="1146.5" y1="283.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1146.5" y1="296.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1115.5" y1="296.9766" y2="292.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1115.5" y1="296.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1111.5" y="279.1201">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1104.5" x2="1146.5" y1="327.3281" y2="327.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1146.5" x2="1146.5" y1="327.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1146.5" y1="340.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1115.5" y1="340.3281" y2="336.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1105.5" x2="1115.5" y1="340.3281" y2="344.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1111.5" y="322.4717">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="364.5" y1="370.6797" y2="366.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="364.5" y1="370.6797" y2="374.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="354.5" x2="1098.5" y1="370.6797" y2="370.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="371.5" y="365.8232">Return result</text><path d="M122,385.6797 L183,385.6797 L183,393.6797 L173,403.6797 L122,403.6797 L122,385.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="732.7578" style="stroke:#000000;stroke-width:2.0;" width="1892" x="122" y="385.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="137" y="400.1748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125" x="198" y="399.0986">[action does not allow]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="181.5" x2="191.5" y1="426.3828" y2="422.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181.5" x2="191.5" y1="426.3828" y2="430.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="181.5" x2="343.5" y1="426.3828" y2="426.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="198.5" y="421.5264">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="122" x2="2014" y1="435.3828" y2="435.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="127" y="446.8018">[action allows]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="702.5" x2="692.5" y1="472.5703" y2="468.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="702.5" x2="692.5" y1="472.5703" y2="476.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="703.5" y1="472.5703" y2="472.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="361.5" y="467.7139">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1551.5" x2="1541.5" y1="502.9219" y2="498.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1551.5" x2="1541.5" y1="502.9219" y2="506.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="1552.5" y1="502.9219" y2="502.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="652" x="721.5" y="498.0654">getIntParams(HttpServletRequest request, String field, String label, int min, int max, Integer defaultValue): Integer</text><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="533.2734" y2="529.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="533.2734" y2="537.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="714.5" x2="1552.5" y1="533.2734" y2="533.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="731.5" y="528.417">Return numberOfPeople, status</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1551.5" x2="1541.5" y1="563.625" y2="559.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1551.5" x2="1541.5" y1="563.625" y2="567.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="1552.5" y1="563.625" y2="563.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="667" x="721.5" y="558.7686">getFloatParams(HttpServletRequest request, String field, String label, float min, float max, Float defaultValue): Float</text><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="593.9766" y2="589.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="593.9766" y2="597.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="714.5" x2="1552.5" y1="593.9766" y2="593.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="731.5" y="589.1201">Return min, max</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1551.5" x2="1541.5" y1="624.3281" y2="620.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1551.5" x2="1541.5" y1="624.3281" y2="628.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="1552.5" y1="624.3281" y2="624.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="655" x="721.5" y="619.4717">getStringParam(HttpServletRequest request, String field, String label, int min, int max, String defaultValue): String</text><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="654.6797" y2="650.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="654.6797" y2="658.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="714.5" x2="1557.5" y1="654.6797" y2="654.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="731.5" y="649.8232">Return priceOrder</text><path d="M132,669.6797 L193,669.6797 L193,677.6797 L183,687.6797 L132,687.6797 L132,669.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="441.7578" style="stroke:#000000;stroke-width:2.0;" width="1872" x="132" y="669.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="147" y="684.1748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="208" y="683.0986">[invalid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="364.5" y1="710.3828" y2="706.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="364.5" y1="710.3828" y2="714.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="354.5" x2="703.5" y1="710.3828" y2="710.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="371.5" y="705.5264">forward listRoom.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="181.5" x2="191.5" y1="740.7344" y2="736.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181.5" x2="191.5" y1="740.7344" y2="744.7344"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="181.5" x2="343.5" y1="740.7344" y2="740.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="198.5" y="735.8779">forward listRoom.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="132" x2="2004" y1="749.7344" y2="749.7344"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="59" x="137" y="761.1533">[valid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1647" x2="1637" y1="786.9219" y2="782.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1647" x2="1637" y1="786.9219" y2="790.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="1648" y1="786.9219" y2="786.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="497" x="721.5" y="782.0654">getRooms(int numOfPeople, float min, float max, String priceOrder): ArrayList&lt;Room&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1947.5" x2="1937.5" y1="817.2734" y2="813.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1947.5" x2="1937.5" y1="817.2734" y2="821.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1659" x2="1948.5" y1="817.2734" y2="817.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1666" y="812.417">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1659" x2="1669" y1="847.625" y2="843.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1659" x2="1669" y1="847.625" y2="851.625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1659" x2="1953.5" y1="847.625" y2="847.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1676" y="842.7686">Return ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="877.9766" y2="873.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="877.9766" y2="881.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="714.5" x2="1653" y1="877.9766" y2="877.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="731.5" y="873.1201">Return ArrayList&lt;Room&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1764.5" x2="1754.5" y1="908.3281" y2="904.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1764.5" x2="1754.5" y1="908.3281" y2="912.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="1765.5" y1="908.3281" y2="908.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="440" x="721.5" y="903.4717">getActiveBookingWithRoomId(Integer bookingInfoId): ArrayList&lt;BookingInfo&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1947.5" x2="1937.5" y1="938.6797" y2="934.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1947.5" x2="1937.5" y1="938.6797" y2="942.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1776.5" x2="1948.5" y1="938.6797" y2="938.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1783.5" y="933.8232">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1776.5" x2="1786.5" y1="969.0313" y2="965.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1776.5" x2="1786.5" y1="969.0313" y2="973.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1776.5" x2="1953.5" y1="969.0313" y2="969.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1793.5" y="964.1748">Return ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="999.3828" y2="995.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="724.5" y1="999.3828" y2="1003.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="714.5" x2="1770.5" y1="999.3828" y2="999.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="731.5" y="994.5264">Return ArrayList&lt;BookingInfo&gt;</text><line style="stroke:#A80036;stroke-width:1.0;" x1="714.5" x2="756.5" y1="1029.7344" y2="1029.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="756.5" x2="756.5" y1="1029.7344" y2="1042.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="715.5" x2="756.5" y1="1042.7344" y2="1042.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="715.5" x2="725.5" y1="1042.7344" y2="1038.7344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="715.5" x2="725.5" y1="1042.7344" y2="1046.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="358" x="721.5" y="1024.8779">HttpServletRequest.setAttribute(String arg0, Object arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="364.5" y1="1073.0859" y2="1069.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="354.5" x2="364.5" y1="1073.0859" y2="1077.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="354.5" x2="708.5" y1="1073.0859" y2="1073.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="371.5" y="1068.2295">forward listRoom.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="176.5" x2="186.5" y1="1103.4375" y2="1099.4375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176.5" x2="186.5" y1="1103.4375" y2="1107.4375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="176.5" x2="348.5" y1="1103.4375" y2="1103.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="193.5" y="1098.5811">forward listRoom.jsp</text><!--MD5=[04788c240294e4b1b25158e2e930ab90]
@startuml roomListController
mainframe **sd** Room List Controller
hide footbox
actor User
participant "Browser" as Browser
participant "ManagerrFilter" as ManagerFilter
participant ":RoomListController" as RoomListController
participant "Helper" as Helper
participant "GetParam" as GetParam
participant ":RoomDAO" as RoomDAO
participant ":BookingInfoDAO" as BookingInfoDAO
participant "Database" as Database


User ->> Browser: Clink on room list link
activate Browser
Browser ->> ManagerFilter: **GET** /RoomListController
activate ManagerFilter
ManagerFilter ->> ManagerFilter: Context.lookup(String name): Object
ManagerFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
Helper - ->> ManagerFilter: Return result
deactivate Helper

alt action does not allow
    ManagerFilter - ->> Browser: forward login.jsp

else action allows
    ManagerFilter ->> RoomListController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    activate RoomListController
    RoomListController ->> GetParam: getIntParams(HttpServletRequest request, String field, String label, int min, int max, Integer defaultValue): Integer
    activate GetParam
    GetParam - ->> RoomListController: Return numberOfPeople, status
    RoomListController ->> GetParam: getFloatParams(HttpServletRequest request, String field, String label, float min, float max, Float defaultValue): Float
    GetParam - ->> RoomListController: Return min, max
    RoomListController ->> GetParam: getStringParam(HttpServletRequest request, String field, String label, int min, int max, String defaultValue): String
    GetParam - ->> RoomListController: Return priceOrder
    deactivate GetParam

    alt invalid data
        RoomListController - ->> ManagerFilter: forward listRoom.jsp
        ManagerFilter - ->> Browser: forward listRoom.jsp
    else valid data
        RoomListController ->> RoomDAO: getRooms(int numOfPeople, float min, float max, String priceOrder): ArrayList<Room>
        activate RoomDAO
        RoomDAO ->> Database: executeQuery(): ResultSet
        activate Database
        Database - ->> RoomDAO: Return ResultSet 
        deactivate Database
        RoomDAO - ->> RoomListController: Return ArrayList<Room>
        deactivate RoomDAO

        RoomListController ->> BookingInfoDAO: getActiveBookingWithRoomId(Integer bookingInfoId): ArrayList<BookingInfo> 
        activate BookingInfoDAO
        BookingInfoDAO ->> Database: executeQuery(): ResultSet
        activate Database
        Database - ->> BookingInfoDAO: Return ResultSet 
        deactivate Database
        BookingInfoDAO - ->> RoomListController: Return ArrayList<BookingInfo> 
        deactivate BookingInfoDAO
        RoomListController ->> RoomListController: HttpServletRequest.setAttribute(String arg0, Object arg1): void
        RoomListController - ->> ManagerFilter: forward listRoom.jsp
        deactivate RoomListController
        ManagerFilter - ->> Browser: forward listRoom.jsp
        deactivate ManagerFilter
        deactivate Browser
    end
end
@enduml

PlantUML version 1.2021.7(Sun May 23 19:40:07 ICT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>