<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2035px" preserveAspectRatio="none" style="width:2194px;height:2035px;" version="1.1" viewBox="0 0 2194 2035" width="2194px" zoomAndPan="magnify"><defs><filter height="300%" id="fjcdvh7iq37o0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="2018.3984" style="stroke:#000000;stroke-width:1.0;" width="2177.5" x="5" y="5"/><path d="M135,5 L135,15.6094 L125,25.6094 L5,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="17" x="8" y="20.5332">sd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="29" y="20.5332">Cancel Booking</text><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="1798.8281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="177.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="1445.4766" style="stroke:#A80036;stroke-width:1.0;" width="10" x="447.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="807.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1103.5" y="654.6797"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1197" y="533.2734"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1292" y="1136.9453"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1409.5" y="865.4609"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1409.5" y="1605.375"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="563.625"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="895.8125"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="1167.2969"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="1635.7266"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1723.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1723.5" y="1394.5938"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="1643.0703" style="stroke:#000000;stroke-width:2.0;" width="1720" x="78" y="355.3281"/><rect fill="#FFFFFF" height="1564.0156" style="stroke:none;stroke-width:1.0;" width="1720" x="78" y="434.3828"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="1291.3672" style="stroke:#000000;stroke-width:2.0;" width="1700" x="88" y="700.0313"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="725.3828"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="414" x="138" y="774.0859"/><rect fill="#FFFFFF" height="1164.125" style="stroke:none;stroke-width:1.0;" width="1700" x="88" y="827.2734"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="1012.8828" style="stroke:#000000;stroke-width:2.0;" width="1680" x="98" y="971.5156"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="996.8672"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="414" x="138" y="1045.5703"/><rect fill="#FFFFFF" height="885.6406" style="stroke:none;stroke-width:1.0;" width="1680" x="98" y="1098.7578"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="734.3984" style="stroke:#000000;stroke-width:2.0;" width="1660" x="108" y="1243"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1268.3516"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="414" x="138" y="1317.0547"/><rect fill="#FFFFFF" height="607.1563" style="stroke:none;stroke-width:1.0;" width="1660" x="108" y="1370.2422"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="530.4531" style="stroke:#000000;stroke-width:2.0;" width="1581" x="118" y="1439.9453"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1465.2969"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="414" x="138" y="1514"/><rect fill="#FFFFFF" height="403.2109" style="stroke:none;stroke-width:1.0;" width="1581" x="118" y="1567.1875"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="251.9688" style="stroke:#000000;stroke-width:2.0;" width="434" x="128" y="1711.4297"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1736.7813"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="414" x="138" y="1785.4844"/><rect fill="#FFFFFF" height="124.7266" style="stroke:none;stroke-width:1.0;" width="434" x="128" y="1838.6719"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1861.5078"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="414" x="138" y="1910.2109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="182" x2="182" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="452" x2="452" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="812" x2="812" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1108.5" x2="1108.5" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1201.5" x2="1201.5" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1296.5" x2="1296.5" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1414.5" x2="1414.5" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1649" x2="1649" y1="117.2188" y2="2015.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1728" x2="1728" y1="117.2188" y2="2015.3984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="10" y="114.1426">User</text><ellipse cx="27.5" cy="42.6094" fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,50.6094 L27.5,77.6094 M14.5,58.6094 L40.5,58.6094 M27.5,77.6094 L14.5,92.6094 M27.5,77.6094 L40.5,92.6094 " fill="none" filter="url(#fjcdvh7iq37o0)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="65" x="148" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="155" y="102.1426">Browser</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="175" x="363" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="370" y="102.1426">:CancelBookingController</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="135" x="743" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="750" y="102.1426">:CommonRoleFilter</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="82" x="1065.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="1072.5" y="102.1426">:GetParam</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="77" x="1161.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1168.5" y="102.1426">:UserDAO</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1252.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1259.5" y="102.1426">:OrderDAO</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="122" x="1351.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1358.5" y="102.1426">:BookingInfoDAO</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1610" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1617" y="102.1426">Database</text><rect fill="#FEFECE" filter="url(#fjcdvh7iq37o0)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="1699" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1706" y="102.1426">Helper</text><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="1798.8281" style="stroke:#A80036;stroke-width:1.0;" width="10" x="177.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="1445.4766" style="stroke:#A80036;stroke-width:1.0;" width="10" x="447.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="323" style="stroke:#A80036;stroke-width:1.0;" width="10" x="807.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1103.5" y="654.6797"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1197" y="533.2734"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1292" y="1136.9453"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1409.5" y="865.4609"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1409.5" y="1605.375"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="563.625"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="895.8125"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="1167.2969"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1644.5" y="1635.7266"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="218.9453" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1723.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#fjcdvh7iq37o0)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1723.5" y="1394.5938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="175.5" x2="165.5" y1="149.5703" y2="145.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="175.5" x2="165.5" y1="149.5703" y2="153.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="176.5" y1="149.5703" y2="149.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="34.5" y="144.7139">Click on Cancel button</text><line style="stroke:#A80036;stroke-width:1.0;" x1="805.5" x2="795.5" y1="179.9219" y2="175.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="805.5" x2="795.5" y1="179.9219" y2="183.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="806.5" y1="179.9219" y2="179.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="194.5" y="175.0654">GET /CancelBookingController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="859.5" y1="210.2734" y2="210.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="859.5" x2="859.5" y1="210.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="818.5" x2="859.5" y1="223.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="818.5" x2="828.5" y1="223.2734" y2="219.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="818.5" x2="828.5" y1="223.2734" y2="227.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="824.5" y="205.417">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1721.5" x2="1711.5" y1="253.625" y2="249.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1721.5" x2="1711.5" y1="253.625" y2="257.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="1722.5" y1="253.625" y2="253.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="824.5" y="248.7686">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1733.5" x2="1775.5" y1="283.9766" y2="283.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1775.5" x2="1775.5" y1="283.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1734.5" x2="1775.5" y1="296.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1734.5" x2="1744.5" y1="296.9766" y2="292.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1734.5" x2="1744.5" y1="296.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1740.5" y="279.1201">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1733.5" x2="1775.5" y1="327.3281" y2="327.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1775.5" x2="1775.5" y1="327.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1734.5" x2="1775.5" y1="340.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1734.5" x2="1744.5" y1="340.3281" y2="336.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1734.5" x2="1744.5" y1="340.3281" y2="344.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1740.5" y="322.4717">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><path d="M78,355.3281 L139,355.3281 L139,363.3281 L129,373.3281 L78,373.3281 L78,355.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1643.0703" style="stroke:#000000;stroke-width:2.0;" width="1720" x="78" y="355.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="93" y="369.8232">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="73" x="154" y="368.7471">[return false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="827.5" y1="396.0313" y2="392.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="827.5" y1="396.0313" y2="400.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="817.5" x2="1722.5" y1="396.0313" y2="396.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="834.5" y="391.1748">forward login.jsp</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="426.3828" y2="422.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="426.3828" y2="430.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="806.5" y1="426.3828" y2="426.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="204.5" y="421.5264">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="1798" y1="435.3828" y2="435.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="83" y="446.8018">[return true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="827.5" y1="472.5703" y2="468.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="817.5" x2="827.5" y1="472.5703" y2="476.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="817.5" x2="1727.5" y1="472.5703" y2="472.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="834.5" y="467.7139">return true</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="502.9219" y2="498.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="502.9219" y2="506.9219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="811.5" y1="502.9219" y2="502.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="474.5" y="498.0654">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1195" x2="1185" y1="533.2734" y2="529.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1195" x2="1185" y1="533.2734" y2="537.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="1196" y1="533.2734" y2="533.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="464.5" y="528.417">getOneUserByUsername(String username): User</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="563.625" y2="559.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="563.625" y2="567.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1207" x2="1643.5" y1="563.625" y2="563.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1214" y="558.7686">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1207" x2="1217" y1="593.9766" y2="589.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1207" x2="1217" y1="593.9766" y2="597.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1207" x2="1648.5" y1="593.9766" y2="593.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1224" y="589.1201">return ResultSet rs</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="624.3281" y2="620.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="624.3281" y2="628.3281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="1201" y1="624.3281" y2="624.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="474.5" y="619.4717">return User user</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1101.5" x2="1091.5" y1="654.6797" y2="650.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1101.5" x2="1091.5" y1="654.6797" y2="658.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="1102.5" y1="654.6797" y2="654.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="627" x="464.5" y="649.8232">getIntParams(HttpServletRequest request, String field, String label, int min, int max, int defaultValue): Integer</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="685.0313" y2="681.0313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="685.0313" y2="689.0313"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="1107.5" y1="685.0313" y2="685.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="474.5" y="680.1748">return Integer bookingId</text><path d="M88,700.0313 L149,700.0313 L149,708.0313 L139,718.0313 L88,718.0313 L88,700.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1291.3672" style="stroke:#000000;stroke-width:2.0;" width="1700" x="88" y="700.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="103" y="714.5264">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="101" x="164" y="713.4502">[invalid bookingId]</text><path d="M138,725.3828 L199,725.3828 L199,733.3828 L189,743.3828 L138,743.3828 L138,725.3828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="725.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="153" y="739.8779">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="214" y="738.8018">[user.role = 1]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="766.0859" y2="762.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="766.0859" y2="770.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="766.0859" y2="766.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="204.5" y="761.2295">Redirect /ViewBookingManagerController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="552" y1="775.0859" y2="775.0859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="143" y="786.5049">[user.role = 0]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="812.2734" y2="808.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="812.2734" y2="816.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="812.2734" y2="812.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="204.5" y="807.417">Redirect /ViewBookingController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="88" x2="1788" y1="828.2734" y2="828.2734"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="91" x="93" y="839.6924">[valid bookingId]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1407.5" x2="1397.5" y1="865.4609" y2="861.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1407.5" x2="1397.5" y1="865.4609" y2="869.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="1408.5" y1="865.4609" y2="865.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="359" x="464.5" y="860.6045">getBookingInfoByBookingId(Integer bookingInfoId): BookingInfo</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="895.8125" y2="891.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="895.8125" y2="899.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1419.5" x2="1643.5" y1="895.8125" y2="895.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1426.5" y="890.9561">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1419.5" x2="1429.5" y1="926.1641" y2="922.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1419.5" x2="1429.5" y1="926.1641" y2="930.1641"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1419.5" x2="1648.5" y1="926.1641" y2="926.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1436.5" y="921.3076">return ResultSet rs</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="956.5156" y2="952.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="956.5156" y2="960.5156"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="1413.5" y1="956.5156" y2="956.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="474.5" y="951.6592">return BookingInfo bookingInfo</text><path d="M98,971.5156 L159,971.5156 L159,979.5156 L149,989.5156 L98,989.5156 L98,971.5156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="1012.8828" style="stroke:#000000;stroke-width:2.0;" width="1680" x="98" y="971.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="113" y="986.0107">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="174" y="984.9346">[invalid bookingInfo]</text><path d="M138,996.8672 L199,996.8672 L199,1004.8672 L189,1014.8672 L138,1014.8672 L138,996.8672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="996.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="153" y="1011.3623">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="214" y="1010.2861">[user.role = 1]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1037.5703" y2="1033.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1037.5703" y2="1041.5703"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1037.5703" y2="1037.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="204.5" y="1032.7139">Redirect /ViewBookingManagerController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="552" y1="1046.5703" y2="1046.5703"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="143" y="1057.9893">[user.role = 0]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1083.7578" y2="1079.7578"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1083.7578" y2="1087.7578"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1083.7578" y2="1083.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="204.5" y="1078.9014">Redirect /ViewBookingController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="98" x2="1778" y1="1099.7578" y2="1099.7578"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102" x="103" y="1111.1768">[valid bookingInfo]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1290" x2="1280" y1="1136.9453" y2="1132.9453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1290" x2="1280" y1="1136.9453" y2="1140.9453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="1291" y1="1136.9453" y2="1136.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="464.5" y="1132.0889">getOneOrderById(Integer orderId): Order</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="1167.2969" y2="1163.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="1167.2969" y2="1171.2969"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1302" x2="1643.5" y1="1167.2969" y2="1167.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1309" y="1162.4404">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1302" x2="1312" y1="1197.6484" y2="1193.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1302" x2="1312" y1="1197.6484" y2="1201.6484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1302" x2="1648.5" y1="1197.6484" y2="1197.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1319" y="1192.792">return ResultSet rs</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="1228" y2="1224"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="1228" y2="1232"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="1296" y1="1228" y2="1228"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="474.5" y="1223.1436">return Order order</text><path d="M108,1243 L169,1243 L169,1251 L159,1261 L108,1261 L108,1243 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="734.3984" style="stroke:#000000;stroke-width:2.0;" width="1660" x="108" y="1243"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="123" y="1257.4951">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="193" x="184" y="1256.4189">[user is not admin or order's user]</text><path d="M138,1268.3516 L199,1268.3516 L199,1276.3516 L189,1286.3516 L138,1286.3516 L138,1268.3516 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1268.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="153" y="1282.8467">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="214" y="1281.7705">[user.role = 1]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1309.0547" y2="1305.0547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1309.0547" y2="1313.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1309.0547" y2="1309.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="204.5" y="1304.1982">Redirect /ViewBookingManagerController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="552" y1="1318.0547" y2="1318.0547"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="143" y="1329.4736">[user.role = 0]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1355.2422" y2="1351.2422"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1355.2422" y2="1359.2422"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1355.2422" y2="1355.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="204.5" y="1350.3857">Redirect /ViewBookingController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="108" x2="1768" y1="1371.2422" y2="1371.2422"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1721.5" x2="1711.5" y1="1394.5938" y2="1390.5938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1721.5" x2="1711.5" y1="1394.5938" y2="1398.5938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="1722.5" y1="1394.5938" y2="1394.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="464.5" y="1389.7373">Date getToDayTime(): Date</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="1424.9453" y2="1420.9453"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="1424.9453" y2="1428.9453"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="1727.5" y1="1424.9453" y2="1424.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="474.5" y="1420.0889">return Date toDayTime</text><path d="M118,1439.9453 L179,1439.9453 L179,1447.9453 L169,1457.9453 L118,1457.9453 L118,1439.9453 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="530.4531" style="stroke:#000000;stroke-width:2.0;" width="1581" x="118" y="1439.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="133" y="1454.4404">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="194" y="1453.3643">[invalid toDayTime]</text><path d="M138,1465.2969 L199,1465.2969 L199,1473.2969 L189,1483.2969 L138,1483.2969 L138,1465.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1465.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="153" y="1479.792">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="214" y="1478.7158">[user.role = 1]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1506" y2="1502"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1506" y2="1510"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1506" y2="1506"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="204.5" y="1501.1436">Redirect /ViewBookingManagerController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="552" y1="1515" y2="1515"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="143" y="1526.4189">[user.role = 0]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1552.1875" y2="1548.1875"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1552.1875" y2="1556.1875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1552.1875" y2="1552.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="204.5" y="1547.3311">Redirect /ViewBookingController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="118" x2="1699" y1="1568.1875" y2="1568.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="123" y="1579.6064">[valid toDayTime]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1407.5" x2="1397.5" y1="1605.375" y2="1601.375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1407.5" x2="1397.5" y1="1605.375" y2="1609.375"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="1408.5" y1="1605.375" y2="1605.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="617" x="464.5" y="1600.5186">updateBookingInfopStatus(Integer bookingInfoId, Integer status, Float total, Integer numberOfDate): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="1635.7266" y2="1631.7266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1642.5" x2="1632.5" y1="1635.7266" y2="1639.7266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1419.5" x2="1643.5" y1="1635.7266" y2="1635.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="1426.5" y="1630.8701">executeUpdate(): prepareStatement</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1419.5" x2="1429.5" y1="1666.0781" y2="1662.0781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1419.5" x2="1429.5" y1="1666.0781" y2="1670.0781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1419.5" x2="1648.5" y1="1666.0781" y2="1666.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196" x="1436.5" y="1661.2217">return int preStm.executeUpdate()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="1696.4297" y2="1692.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="457.5" x2="467.5" y1="1696.4297" y2="1700.4297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="457.5" x2="1413.5" y1="1696.4297" y2="1696.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="474.5" y="1691.5732">return boolean isSuccess</text><path d="M128,1711.4297 L189,1711.4297 L189,1719.4297 L179,1729.4297 L128,1729.4297 L128,1711.4297 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="251.9688" style="stroke:#000000;stroke-width:2.0;" width="434" x="128" y="1711.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="143" y="1725.9248">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="204" y="1724.8486">[isSuccess = false]</text><path d="M138,1736.7813 L199,1736.7813 L199,1744.7813 L189,1754.7813 L138,1754.7813 L138,1736.7813 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1736.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="153" y="1751.2764">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="214" y="1750.2002">[user.role = 1]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1777.4844" y2="1773.4844"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1777.4844" y2="1781.4844"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1777.4844" y2="1777.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="204.5" y="1772.6279">Redirect /ViewBookingManagerController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="552" y1="1786.4844" y2="1786.4844"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="143" y="1797.9033">[user.role = 0]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1823.6719" y2="1819.6719"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1823.6719" y2="1827.6719"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1823.6719" y2="1823.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="204.5" y="1818.8154">Redirect /ViewBookingController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="128" x2="562" y1="1839.6719" y2="1839.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="133" y="1851.0908">[isSuccess = true]</text><path d="M138,1861.5078 L199,1861.5078 L199,1869.5078 L189,1879.5078 L138,1879.5078 L138,1861.5078 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="414" x="138" y="1861.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="153" y="1876.0029">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="214" y="1874.9268">[user.role = 1]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1902.2109" y2="1898.2109"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187.5" x2="197.5" y1="1902.2109" y2="1906.2109"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187.5" x2="446.5" y1="1902.2109" y2="1902.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="204.5" y="1897.3545">Redirect /ViewBookingManagerController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="552" y1="1911.2109" y2="1911.2109"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="77" x="143" y="1922.6299">[user.role = 0]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="182.5" x2="192.5" y1="1948.3984" y2="1944.3984"/><line style="stroke:#A80036;stroke-width:1.0;" x1="182.5" x2="192.5" y1="1948.3984" y2="1952.3984"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="182.5" x2="451.5" y1="1948.3984" y2="1948.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="199.5" y="1943.542">Redirect /ViewBookingController</text><!--MD5=[47342ed1a93be60d3fe708c69ae449fc]
@startuml cancelBooking

hide footbox
mainframe <b>sd</b> Cancel Booking
actor User
participant "Browser" as Browser
participant ":CancelBookingController" as CancelBookingController
participant ":CommonRoleFilter" as CommonRoleFilter
participant ":GetParam" as GetParam
participant ":UserDAO" as UserDAO
participant ":OrderDAO" as OrderDAO
participant ":BookingInfoDAO" as BookingInfoDAO
participant "Database" as DB
participant "Helper" as Helper


User ->> Browser: Click on Cancel button
activate Browser

Browser ->> CommonRoleFilter: GET /CancelBookingController
activate CommonRoleFilter
CommonRoleFilter ->> CommonRoleFilter: Context.lookup(String name): Object
CommonRoleFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
alt return false 
    Helper - ->> CommonRoleFilter: forward login.jsp
    CommonRoleFilter - ->> Browser: forward login.jsp
else return true
    Helper - ->> CommonRoleFilter: return true
    deactivate Helper
    CommonRoleFilter - ->> CancelBookingController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    deactivate CommonRoleFilter
    activate CancelBookingController
    CancelBookingController ->> UserDAO: getOneUserByUsername(String username): User
    activate UserDAO
    UserDAO ->> DB: executeQuery(): ResultSet
    activate DB
    DB - ->> UserDAO: return ResultSet rs
    deactivate DB
    UserDAO - ->> CancelBookingController: return User user
    deactivate UserDAO
    CancelBookingController ->> GetParam: getIntParams(HttpServletRequest request, String field, String label, int min, int max, int defaultValue): Integer   
    activate GetParam
    GetParam - ->> CancelBookingController: return Integer bookingId
    deactivate GetParam
    alt invalid bookingId
        alt user.role = 1
            CancelBookingController - ->> Browser: Redirect /ViewBookingManagerController
        else user.role = 0
            CancelBookingController - ->> Browser: Redirect /ViewBookingController
        end
    else valid bookingId
        CancelBookingController ->> BookingInfoDAO: getBookingInfoByBookingId(Integer bookingInfoId): BookingInfo
        activate BookingInfoDAO
        BookingInfoDAO ->> DB: executeQuery(): ResultSet
        activate DB
        DB - ->> BookingInfoDAO: return ResultSet rs
        deactivate DB
        BookingInfoDAO - ->> CancelBookingController: return BookingInfo bookingInfo
        deactivate BookingInfoDAO
        alt invalid bookingInfo
            alt user.role = 1
                CancelBookingController - ->> Browser: Redirect /ViewBookingManagerController
            else user.role = 0
                CancelBookingController - ->> Browser: Redirect /ViewBookingController
            end
        else valid bookingInfo
            CancelBookingController ->> OrderDAO: getOneOrderById(Integer orderId): Order
            activate OrderDAO
            OrderDAO ->> DB: executeQuery(): ResultSet
            activate DB
            DB - ->> OrderDAO: return ResultSet rs
            deactivate DB
            OrderDAO - ->> CancelBookingController: return Order order
            deactivate OrderDAO
            alt user is not admin or order's user
                alt user.role = 1
                    CancelBookingController - ->> Browser: Redirect /ViewBookingManagerController
                else user.role = 0
                    CancelBookingController - ->> Browser: Redirect /ViewBookingController
                end
            else
                CancelBookingController ->> Helper: Date getToDayTime(): Date
                activate Helper
                Helper - ->> CancelBookingController: return Date toDayTime
                deactivate Helper
                alt invalid toDayTime
                    alt user.role = 1
                        CancelBookingController - ->> Browser: Redirect /ViewBookingManagerController
                    else user.role = 0
                        CancelBookingController - ->> Browser: Redirect /ViewBookingController
                    end
                else valid toDayTime
                    CancelBookingController ->> BookingInfoDAO: updateBookingInfopStatus(Integer bookingInfoId, Integer status, Float total, Integer numberOfDate): boolean
                    activate BookingInfoDAO
                    BookingInfoDAO ->> DB: executeUpdate(): prepareStatement 
                    activate DB
                    DB - ->> BookingInfoDAO: return int preStm.executeUpdate()
                    deactivate DB
                    BookingInfoDAO - ->> CancelBookingController: return boolean isSuccess
                    deactivate BookingInfoDAO
                    alt isSuccess = false
                        alt user.role = 1
                            CancelBookingController - ->> Browser: Redirect /ViewBookingManagerController
                        else user.role = 0
                            CancelBookingController - ->> Browser: Redirect /ViewBookingController
                        end
                    else isSuccess = true
                        alt user.role = 1
                            CancelBookingController - ->> Browser: Redirect /ViewBookingManagerController
                        else user.role = 0
                            CancelBookingController - ->> Browser: Redirect /ViewBookingController
                            deactivate CancelBookingController
                            deactivate Browser
                        end
                    end
                end
            end
        end
    end
end
@enduml

PlantUML version 1.2021.00(Sun Jan 10 17:25:05 ICT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>