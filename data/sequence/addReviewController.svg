<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1391px" preserveAspectRatio="none" style="width:2037px;height:1391px;background:#FFFFFF;" version="1.1" viewBox="0 0 2037 1391" width="2037px" zoomAndPan="magnify"><defs><filter height="300%" id="fdtz34efjk6lr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="1374.0547" style="stroke:#000000;stroke-width:1.0;" width="2020.5" x="5" y="5"/><path d="M176,5 L176,15.6094 L166,25.6094 L5,25.6094 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="17" x="8" y="20.5332">sd</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="29" y="20.5332">Add Review Controller</text><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="1168.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="180.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="292.6484" style="stroke:#A80036;stroke-width:1.0;" width="10" x="371.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="845.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="731.5" y="472.5703"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1073.5" y="739.2188"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1168.5" y="932.1641"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1271.5" y="1125.1094"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1417.5" y="769.5703"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1417.5" y="962.5156"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1417.5" y="1155.4609"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="117.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1496.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1955.5" y="502.9219"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="968.375" style="stroke:#000000;stroke-width:2.0;" width="1910.5" x="101" y="385.6797"/><rect fill="#FFFFFF" height="919.6719" style="stroke:none;stroke-width:1.0;" width="1910.5" x="101" y="434.3828"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="738.0781" style="stroke:#000000;stroke-width:2.0;" width="1381" x="111" y="608.9766"/><rect fill="#FFFFFF" height="689.375" style="stroke:none;stroke-width:1.0;" width="1381" x="111" y="657.6797"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="494.7813" style="stroke:#000000;stroke-width:2.0;" width="1361" x="121" y="845.2734"/><rect fill="#FFFFFF" height="446.0781" style="stroke:none;stroke-width:1.0;" width="1361" x="121" y="893.9766"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="294.8359" style="stroke:#000000;stroke-width:2.0;" width="1341" x="131" y="1038.2188"/><rect fill="#FFFFFF" height="246.1328" style="stroke:none;stroke-width:1.0;" width="1341" x="131" y="1086.9219"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="682.5" x="141" y="1231.1641"/><rect fill="#FFFFFF" height="46.1875" style="stroke:none;stroke-width:1.0;" width="682.5" x="141" y="1279.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="185" x2="185" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="376" x2="376" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="736.5" x2="736.5" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1078" x2="1078" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1173" x2="1173" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1276" x2="1276" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1422" x2="1422" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1501" x2="1501" y1="117.2188" y2="1371.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1960.5" x2="1960.5" y1="117.2188" y2="1371.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="10" y="114.1426">User</text><ellipse cx="27.5" cy="42.6094" fill="#FEFECE" filter="url(#fdtz34efjk6lr)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M27.5,50.6094 L27.5,77.6094 M14.5,58.6094 L40.5,58.6094 M27.5,77.6094 L14.5,92.6094 M27.5,77.6094 L40.5,92.6094 " fill="none" filter="url(#fdtz34efjk6lr)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="65" x="151" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="158" y="102.1426">Browser</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="107" x="321" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="328" y="102.1426">CustomerFilter</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="150" x="659.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="666.5" y="102.1426">:AddReviewController</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="77" x="1038" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="1045" y="102.1426">:UserDAO</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="1129" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="1136" y="102.1426">:RoomDAO</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1228" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1235" y="102.1426">:ReviewDAO</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1383" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1390" y="102.1426">Database</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="55" x="1472" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1479" y="102.1426">Helper</text><rect fill="#FEFECE" filter="url(#fdtz34efjk6lr)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="78" x="1919.5" y="80.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1926.5" y="102.1426">GetParam</text><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="1168.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="180.5" y="149.5703"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="292.6484" style="stroke:#A80036;stroke-width:1.0;" width="10" x="371.5" y="179.9219"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="845.4844" style="stroke:#A80036;stroke-width:1.0;" width="10" x="731.5" y="472.5703"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1073.5" y="739.2188"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1168.5" y="932.1641"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1271.5" y="1125.1094"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1417.5" y="769.5703"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1417.5" y="962.5156"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1417.5" y="1155.4609"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="117.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1496.5" y="253.625"/><rect fill="#FFFFFF" filter="url(#fdtz34efjk6lr)" height="91.0547" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1955.5" y="502.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="178.5" x2="168.5" y1="149.5703" y2="145.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="178.5" x2="168.5" y1="149.5703" y2="153.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="27.5" x2="179.5" y1="149.5703" y2="149.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="34.5" y="144.7139">Submit add reivew form</text><line style="stroke:#A80036;stroke-width:1.0;" x1="369.5" x2="359.5" y1="179.9219" y2="175.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="369.5" x2="359.5" y1="179.9219" y2="183.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="370.5" y1="179.9219" y2="179.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="36" x="197.5" y="175.0654">POST</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="237.5" y="175.0654">/AddReviewController</text><line style="stroke:#A80036;stroke-width:1.0;" x1="381.5" x2="423.5" y1="210.2734" y2="210.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="423.5" x2="423.5" y1="210.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="382.5" x2="423.5" y1="223.2734" y2="223.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="382.5" x2="392.5" y1="223.2734" y2="219.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="382.5" x2="392.5" y1="223.2734" y2="227.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="388.5" y="205.417">Context.lookup(String name): Object</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1494.5" x2="1484.5" y1="253.625" y2="249.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1494.5" x2="1484.5" y1="253.625" y2="257.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="381.5" x2="1495.5" y1="253.625" y2="253.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="721" x="388.5" y="248.7686">protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1506.5" x2="1548.5" y1="283.9766" y2="283.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1548.5" x2="1548.5" y1="283.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1507.5" x2="1548.5" y1="296.9766" y2="296.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1507.5" x2="1517.5" y1="296.9766" y2="292.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1507.5" x2="1517.5" y1="296.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="1513.5" y="279.1201">isLogin(HttpServletRequest request): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1506.5" x2="1548.5" y1="327.3281" y2="327.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1548.5" x2="1548.5" y1="327.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1507.5" x2="1548.5" y1="340.3281" y2="340.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1507.5" x2="1517.5" y1="340.3281" y2="336.3281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1507.5" x2="1517.5" y1="340.3281" y2="344.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="435" x="1513.5" y="322.4717">correctRole(HttpServletRequest request, int minRole, int maxRole): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="381.5" x2="391.5" y1="370.6797" y2="366.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="381.5" x2="391.5" y1="370.6797" y2="374.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381.5" x2="1500.5" y1="370.6797" y2="370.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="398.5" y="365.8232">Return result</text><path d="M101,385.6797 L162,385.6797 L162,393.6797 L152,403.6797 L101,403.6797 L101,385.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="968.375" style="stroke:#000000;stroke-width:2.0;" width="1910.5" x="101" y="385.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="116" y="400.1748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125" x="177" y="399.0986">[action does not allow]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="426.3828" y2="422.3828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="426.3828" y2="430.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="190.5" x2="370.5" y1="426.3828" y2="426.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="207.5" y="421.5264">forward login.jsp</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="2011.5" y1="435.3828" y2="435.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="106" y="446.8018">[action allows]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="729.5" x2="719.5" y1="472.5703" y2="468.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="729.5" x2="719.5" y1="472.5703" y2="476.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="376.5" x2="730.5" y1="472.5703" y2="472.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="383.5" y="467.7139">doFilter(ServletRequest arg0, ServletResponse arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1953.5" x2="1943.5" y1="502.9219" y2="498.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1953.5" x2="1943.5" y1="502.9219" y2="506.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="1954.5" y1="502.9219" y2="502.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="652" x="748.5" y="498.0654">getIntParams(HttpServletRequest request, String field, String label, int min, int max, Integer defaultValue): Integer</text><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="533.2734" y2="529.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="533.2734" y2="537.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="741.5" x2="1954.5" y1="533.2734" y2="533.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="758.5" y="528.417">Return roomId, rate</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1953.5" x2="1943.5" y1="563.625" y2="559.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1953.5" x2="1943.5" y1="563.625" y2="567.625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="1954.5" y1="563.625" y2="563.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="655" x="748.5" y="558.7686">getStringParam(HttpServletRequest request, String field, String label, int min, int max, String defaultValue): String</text><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="593.9766" y2="589.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="593.9766" y2="597.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="741.5" x2="1959.5" y1="593.9766" y2="593.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="758.5" y="589.1201">Return message</text><path d="M111,608.9766 L172,608.9766 L172,616.9766 L162,626.9766 L111,626.9766 L111,608.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="738.0781" style="stroke:#000000;stroke-width:2.0;" width="1381" x="111" y="608.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="126" y="623.4717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="69" x="187" y="622.3955">[invalid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="649.6797" y2="645.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="649.6797" y2="653.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="190.5" x2="730.5" y1="649.6797" y2="649.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="207.5" y="644.8232">redirect /ViewRoomController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="111" x2="1492" y1="658.6797" y2="658.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="59" x="116" y="670.0986">[valid data]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="783.5" y1="695.8672" y2="695.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="783.5" x2="783.5" y1="695.8672" y2="708.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="742.5" x2="783.5" y1="708.8672" y2="708.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="742.5" x2="752.5" y1="708.8672" y2="704.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="742.5" x2="752.5" y1="708.8672" y2="712.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="318" x="748.5" y="691.0107">HttpSession.getAttribute(String arg0, Object arg1): void</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1071.5" x2="1061.5" y1="739.2188" y2="735.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1071.5" x2="1061.5" y1="739.2188" y2="743.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="1072.5" y1="739.2188" y2="739.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="748.5" y="734.3623">getOneUserByUsername(String username): User</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1415.5" x2="1405.5" y1="769.5703" y2="765.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1415.5" x2="1405.5" y1="769.5703" y2="773.5703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1083.5" x2="1416.5" y1="769.5703" y2="769.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1090.5" y="764.7139">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1083.5" x2="1093.5" y1="799.9219" y2="795.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1083.5" x2="1093.5" y1="799.9219" y2="803.9219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1083.5" x2="1421.5" y1="799.9219" y2="799.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1100.5" y="795.0654">Return ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="830.2734" y2="826.2734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="830.2734" y2="834.2734"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="741.5" x2="1077.5" y1="830.2734" y2="830.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="758.5" y="825.417">Return User</text><path d="M121,845.2734 L182,845.2734 L182,853.2734 L172,863.2734 L121,863.2734 L121,845.2734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="494.7813" style="stroke:#000000;stroke-width:2.0;" width="1361" x="121" y="845.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="136" y="859.7686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="116" x="197" y="858.6924">[user does not exist]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="885.9766" y2="881.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="885.9766" y2="889.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="190.5" x2="730.5" y1="885.9766" y2="885.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="207.5" y="881.1201">redirect /ViewRoomController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="121" x2="1482" y1="894.9766" y2="894.9766"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="126" y="906.3955">[user exists]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1166.5" x2="1156.5" y1="932.1641" y2="928.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1166.5" x2="1156.5" y1="932.1641" y2="936.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="1167.5" y1="932.1641" y2="932.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="748.5" y="927.3076">getRoomById(int roomId): Room</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1415.5" x2="1405.5" y1="962.5156" y2="958.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1415.5" x2="1405.5" y1="962.5156" y2="966.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1178.5" x2="1416.5" y1="962.5156" y2="962.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1185.5" y="957.6592">executeQuery(): ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1178.5" x2="1188.5" y1="992.8672" y2="988.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1178.5" x2="1188.5" y1="992.8672" y2="996.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1178.5" x2="1421.5" y1="992.8672" y2="992.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1195.5" y="988.0107">Return ResultSet</text><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="1023.2188" y2="1019.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="1023.2188" y2="1027.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="741.5" x2="1172.5" y1="1023.2188" y2="1023.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="758.5" y="1018.3623">Return Room</text><path d="M131,1038.2188 L192,1038.2188 L192,1046.2188 L182,1056.2188 L131,1056.2188 L131,1038.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="294.8359" style="stroke:#000000;stroke-width:2.0;" width="1341" x="131" y="1038.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="146" y="1052.7139">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="207" y="1051.6377">[room does not exist]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="1078.9219" y2="1074.9219"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="1078.9219" y2="1082.9219"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="190.5" x2="730.5" y1="1078.9219" y2="1078.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="207.5" y="1074.0654">redirect /ViewRoomController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131" x2="1472" y1="1087.9219" y2="1087.9219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75" x="136" y="1099.3408">[room exists]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1269.5" x2="1259.5" y1="1125.1094" y2="1121.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1269.5" x2="1259.5" y1="1125.1094" y2="1129.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="1270.5" y1="1125.1094" y2="1125.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="748.5" y="1120.2529">addReview(Review review): boolean</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1415.5" x2="1405.5" y1="1155.4609" y2="1151.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1415.5" x2="1405.5" y1="1155.4609" y2="1159.4609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1281.5" x2="1416.5" y1="1155.4609" y2="1155.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="1288.5" y="1150.6045">executeUpdate(): int</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1281.5" x2="1291.5" y1="1185.8125" y2="1181.8125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1281.5" x2="1291.5" y1="1185.8125" y2="1189.8125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1281.5" x2="1421.5" y1="1185.8125" y2="1185.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="1298.5" y="1180.9561">Return result</text><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="1216.1641" y2="1212.1641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="741.5" x2="751.5" y1="1216.1641" y2="1220.1641"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="741.5" x2="1275.5" y1="1216.1641" y2="1216.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="758.5" y="1211.3076">Return result</text><path d="M141,1231.1641 L202,1231.1641 L202,1239.1641 L192,1249.1641 L141,1249.1641 L141,1231.1641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:2.0;" width="682.5" x="141" y="1231.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="156" y="1245.6592">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="35" x="217" y="1244.583">[false]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="1271.8672" y2="1267.8672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="200.5" y1="1271.8672" y2="1275.8672"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="190.5" x2="730.5" y1="1271.8672" y2="1271.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="207.5" y="1267.0107">redirect /ViewRoomController</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="141" x2="823.5" y1="1280.8672" y2="1280.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="31" x="146" y="1292.2861">[true]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="185.5" x2="195.5" y1="1318.0547" y2="1314.0547"/><line style="stroke:#A80036;stroke-width:1.0;" x1="185.5" x2="195.5" y1="1318.0547" y2="1322.0547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="185.5" x2="735.5" y1="1318.0547" y2="1318.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="202.5" y="1313.1982">redirect /ViewRoomController</text><!--MD5=[1e3703c8a984a7f27e2e956bf3843f88]
@startuml
mainframe **sd** Add Review Controller
hide footbox
actor User
participant "Browser" as Browser
participant "CustomerFilter" as CustomerFilter
participant ":AddReviewController" as AddReviewController
participant ":UserDAO" as UserDAO
participant ":RoomDAO" as RoomDAO
participant ":ReviewDAO" as ReviewDAO
participant "Database" as Database
participant "Helper" as Helper
participant "GetParam" as GetParam

User ->> Browser: Submit add reivew form
activate Browser
Browser ->> CustomerFilter: **POST** /AddReviewController
activate CustomerFilter
CustomerFilter ->> CustomerFilter: Context.lookup(String name): Object
CustomerFilter ->> Helper: protectedRouter(HttpServletRequest request, HttpServletResponse response, int minRole, int maxRole, String page): boolean
activate Helper
Helper ->> Helper: isLogin(HttpServletRequest request): boolean
Helper ->> Helper: correctRole(HttpServletRequest request, int minRole, int maxRole): boolean
Helper - ->> CustomerFilter: Return result
deactivate Helper

alt action does not allow
    CustomerFilter - ->> Browser: forward login.jsp

else action allows
    CustomerFilter ->> AddReviewController: doFilter(ServletRequest arg0, ServletResponse arg1): void
    deactivate CustomerFilter
    activate AddReviewController
    AddReviewController ->> GetParam: getIntParams(HttpServletRequest request, String field, String label, int min, int max, Integer defaultValue): Integer
    activate GetParam
    GetParam - ->> AddReviewController: Return roomId, rate
    AddReviewController ->> GetParam: getStringParam(HttpServletRequest request, String field, String label, int min, int max, String defaultValue): String
    GetParam - ->> AddReviewController: Return message
    deactivate GetParam
    alt invalid data
        AddReviewController - ->> Browser: redirect /ViewRoomController
    else valid data
        AddReviewController ->> AddReviewController: HttpSession.getAttribute(String arg0, Object arg1): void
        AddReviewController ->> UserDAO: getOneUserByUsername(String username): User
        activate UserDAO
        UserDAO ->> Database: executeQuery(): ResultSet
        activate Database
        Database - ->> UserDAO: Return ResultSet
        deactivate Database
        UserDAO - ->> AddReviewController: Return User
        deactivate UserDAO

        alt user does not exist
            AddReviewController - ->> Browser: redirect /ViewRoomController
        else user exists
            AddReviewController ->> RoomDAO: getRoomById(int roomId): Room
            activate RoomDAO
            RoomDAO ->> Database: executeQuery(): ResultSet
            activate Database
            Database - ->> RoomDAO: Return ResultSet
            deactivate Database
            RoomDAO - ->> AddReviewController: Return Room
            deactivate RoomDAO

            alt room does not exist
                AddReviewController - ->> Browser: redirect /ViewRoomController
            else room exists
                AddReviewController ->> ReviewDAO: addReview(Review review): boolean
                activate ReviewDAO
                ReviewDAO ->> Database: executeUpdate(): int
                activate Database
                Database - ->> ReviewDAO: Return result
                deactivate Database
                ReviewDAO - ->> AddReviewController: Return result
                deactivate ReviewDAO

                alt false
                    AddReviewController - ->> Browser: redirect /ViewRoomController
                
                else true
                    AddReviewController - ->> Browser: redirect /ViewRoomController
                    deactivate Browser
                    deactivate AddReviewController
                end
            end
        end
    end
end


@enduml

PlantUML version 1.2021.7(Sun May 23 19:40:07 ICT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>