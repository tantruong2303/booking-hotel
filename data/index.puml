@startuml index

hide footbox
mainframe <b>sd</b> Index Page
actor User
participant "Browser" as Browser
participant ":IndexController" as IndexController
participant ":GetParam" as GetParam
participant ":RoomDAO" as RoomDAO
participant "Database" as DB


User ->> Browser: Click on index link
activate Browser

Browser ->> IndexController: GET /IndexController
activate IndexController

    IndexController ->> GetParam: getStringParam(HttpServletRequest request, String field, String label, int min, int max,S tring defaultValue): String
    activate GetParam
    GetParam -->> IndexController: return priceOrder 
    IndexController ->> GetParam: getFloatParams(HttpServletRequest request, String field, String label, float min, float max, float defaultValue): Float
    GetParam -->> IndexController: return minPrice, maxPrice
    IndexController ->> GetParam: getIntParams(HttpServletRequest request, String field, String label, int min, int max, int defaultValue): Integer   
    GetParam -->> IndexController: return numOfPeople
    deactivate GetParam
alt invalid data
    IndexController -->> Browser: forward index.jsp
else
    alt min > max
        IndexController -->> Browser: forward index.jsp
    else min <= max
        IndexController ->> RoomDAO: getRooms(int numOfPeople, float min, float max, String priceOrder, Integer status, boolean isSame): ArrayList<Room>
        activate RoomDAO
        RoomDAO ->> DB: executeQuery(): ResultSet
        activate DB
        DB -->> RoomDAO: return ResultSet rs
        deactivate DB
        RoomDAO -->> IndexController: return ArrayList<Room>
        deactivate RoomDAO
        IndexController ->> IndexController: HttpServletRequest.setAttribute(String arg0, Object arg1): void
        IndexController -->> Browser: forward index.jsp
        deactivate IndexController
        deactivate Browser
    end
end
@enduml